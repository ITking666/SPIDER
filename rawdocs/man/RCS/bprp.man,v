head	1.56;
access;
symbols
	best-code:1.37
	pre-named-reg:1.37
	pre_GPL:1.37
	prec_CA:1.37
	oct21:1.25;
locks; strict;


1.56
date	2014.04.28.12.27.03;	author leith;	state Exp;
branches;
next	1.55;

1.55
date	2014.01.12.17.14.21;	author leith;	state Exp;
branches;
next	1.54;

1.54
date	2012.07.18.17.12.11;	author leith;	state Exp;
branches;
next	1.53;

1.53
date	2012.04.13.14.55.25;	author leith;	state Exp;
branches;
next	1.52;

1.52
date	2012.02.23.17.07.02;	author leith;	state Exp;
branches;
next	1.51;

1.51
date	2012.01.06.15.03.09;	author leith;	state Exp;
branches;
next	1.50;

1.50
date	2011.12.20.16.33.41;	author leith;	state Exp;
branches;
next	1.49;

1.49
date	2011.09.27.12.09.20;	author leith;	state Exp;
branches;
next	1.48;

1.48
date	2011.06.20.18.18.35;	author leith;	state Exp;
branches;
next	1.47;

1.47
date	2011.06.06.16.20.55;	author leith;	state Exp;
branches;
next	1.46;

1.46
date	2011.05.16.17.45.12;	author leith;	state Exp;
branches;
next	1.45;

1.45
date	2009.09.15.13.08.33;	author leith;	state Exp;
branches;
next	1.44;

1.44
date	2009.09.14.17.39.24;	author leith;	state Exp;
branches;
next	1.43;

1.43
date	2009.09.14.17.25.43;	author leith;	state Exp;
branches;
next	1.42;

1.42
date	2009.09.14.14.03.23;	author leith;	state Exp;
branches;
next	1.41;

1.41
date	2009.09.04.13.56.34;	author leith;	state Exp;
branches;
next	1.40;

1.40
date	2008.11.04.14.11.16;	author leith;	state Exp;
branches;
next	1.39;

1.39
date	2006.10.04.16.12.37;	author leith;	state Exp;
branches;
next	1.38;

1.38
date	2006.09.19.17.38.40;	author leith;	state Exp;
branches;
next	1.37;

1.37
date	2001.05.04.16.20.24;	author bbaxter;	state Exp;
branches;
next	1.36;

1.36
date	2001.04.24.14.17.37;	author bbaxter;	state Exp;
branches;
next	1.35;

1.35
date	2001.02.13.17.53.12;	author leith;	state Exp;
branches;
next	1.34;

1.34
date	2001.02.13.17.47.58;	author leith;	state Exp;
branches;
next	1.33;

1.33
date	2001.02.12.21.16.13;	author pawel;	state Exp;
branches;
next	1.32;

1.32
date	2000.08.30.12.32.35;	author leith;	state Exp;
branches;
next	1.31;

1.31
date	2000.08.14.13.56.16;	author leith;	state Exp;
branches;
next	1.30;

1.30
date	2000.07.07.20.47.08;	author pawel;	state Exp;
branches;
next	1.29;

1.29
date	2000.07.07.18.42.33;	author pawel;	state Exp;
branches;
next	1.28;

1.28
date	2000.02.10.19.18.14;	author bimal;	state Exp;
branches;
next	1.27;

1.27
date	2000.01.23.22.06.34;	author pawel;	state Exp;
branches;
next	1.26;

1.26
date	2000.01.06.18.38.33;	author bimal;	state Exp;
branches;
next	1.25;

1.25
date	99.10.20.20.07.30;	author pawel;	state Exp;
branches;
next	1.24;

1.24
date	99.09.30.20.38.24;	author pawel;	state Exp;
branches;
next	1.23;

1.23
date	99.09.01.17.54.12;	author pawel;	state Exp;
branches;
next	1.22;

1.22
date	99.08.10.13.25.45;	author pawel;	state Exp;
branches;
next	1.21;

1.21
date	99.05.03.14.21.22;	author leith;	state Exp;
branches;
next	1.20;

1.20
date	99.03.09.16.49.17;	author pawel;	state Exp;
branches;
next	1.19;

1.19
date	98.11.05.18.40.43;	author pawel;	state Exp;
branches;
next	1.18;

1.18
date	97.08.25.15.05.29;	author leith;	state Exp;
branches;
next	1.17;

1.17
date	97.04.23.14.00.17;	author leith;	state Exp;
branches;
next	1.16;

1.16
date	97.04.23.13.13.46;	author pawel;	state Exp;
branches;
next	1.15;

1.15
date	97.04.23.13.01.54;	author leith;	state Exp;
branches;
next	1.14;

1.14
date	97.02.07.20.59.19;	author pawel;	state Exp;
branches;
next	1.13;

1.13
date	96.08.16.13.15.48;	author adri;	state Exp;
branches;
next	1.12;

1.12
date	96.08.14.17.07.42;	author pawel;	state Exp;
branches;
next	1.11;

1.11
date	96.08.09.13.26.51;	author adri;	state Exp;
branches;
next	1.10;

1.10
date	96.07.15.20.10.39;	author leith;	state Exp;
branches;
next	1.9;

1.9
date	96.07.15.16.23.14;	author adri;	state Exp;
branches;
next	1.8;

1.8
date	96.07.15.15.17.59;	author adri;	state Exp;
branches;
next	1.7;

1.7
date	96.07.15.15.07.19;	author adri;	state Exp;
branches;
next	1.6;

1.6
date	95.04.13.19.35.18;	author mladjadj;	state Exp;
branches;
next	1.5;

1.5
date	94.09.19.10.56.48;	author leith;	state Exp;
branches;
next	1.4;

1.4
date	94.09.16.14.38.11;	author pawel;	state Exp;
branches;
next	1.3;

1.3
date	94.08.25.12.45.29;	author leith;	state Exp;
branches;
next	1.2;

1.2
date	94.07.12.16.31.54;	author leith;	state Exp;
branches;
next	1.1;

1.1
date	94.05.16.12.14.12;	author leith;	state Exp;
branches;
next	;


desc
@@


1.56
log
@lambda msg
@
text
@
BP RP     Back Projection - 3D, iterative, Richardson, constrained  ||*   BP RP   
                                                               04/12/12

PURPOSE:  Calculates a sample reconstruction from selected projection
          images using Richardsons constrained method.  
          Only works for square projection images.

          See: '<a href='"'../bp_overview.html'"'>'Comparison of 'BP' operations'</a>'. 

SEE ALSO: BP RP 3
          BP CG    
          BP 3F     
          BP 3D   
          BP W2  

USAGE:    BP RP [niter]       '<br />'
          [Optional register variable receives the number of 
          iterations completed during the reconstruction.]

          .TEMPLATE FOR IMAGE FILE: PROJ***
          [Enter template for projection image input files.]

          .FILE NUMBERS OR SELECTION DOC. FILE NAME: 1-700 
           [Enter image file numbers or the name of a document 
           file which contains the image file numbers in its 
           first register column.]

          .RADIUS OF RESTORED OBJECT: 23
          [Enter radius of reconstructed object in pixels (smaller than the
           volume size). The reconstruction is calculated inside the
           sphere only.]

          .ANGLES DOC FILE: ANGLESDOC
          [Enter name of the document file which contains Eulerian
           angles:  psi, theta, and phi in the first three registers
           columns. These angles specify the projection directions.]

	  .SYMMETRIES ANGLES DOC FILE: ANGSYMDOC
           [Enter '<b>'*'</b>' if the structure has no symmetries. '<br />'
           Otherwise, enter the name of the document file containing
           Eulerian angles defining symmetries (psi, theta, phi). The
           angles should be such that when used in operation 'RT 3D'
           they transform the volume into itself.  The identity
           operation (angles 0,0,0) MUST be included.  The symmetries
           will be internally enforced on the volume.  The
           reconstruction in this case is calculated as though the
           projections were multiplied as many times as there are
           symmetries.]

	  .RECONSTRUCTED VOLUME FILE: VOLUME1001
           [Enter name for the output file.]

          .LAMBDA, CORRECTION LIMIT: 1.0e-4, 0.0
          ['<b>'Lambda'</b>' determines the weight of corrections. Too small a
           value results in long time of calculations; too large
           value will terminate the iterations too soon. (Note #2). '<br />'
           '<b>'Correction limit'</b>' can be used to terminate the iterations.
           When the squared correction of the structure becomes
           smaller than the preset value, the iterations are
           terminated.  When correction limit is set to zero,
           it will not be used to terminate the program.  Iteration limit will
           be used instead.] 

          .ITERATION LIMIT, MODE: 25, 8
          [Program will terminate after number of iterations given. '<br />'
           Mode determines the constraint(s) used: '<br />'
           0 - No constraints.                     '<br />'
           1 - Smoothing.                          '<br />'
           2 - Min constraint.                     '<br />'
           3 - Smoothing & min constraints.        '<br />'
           4 - (No mode 4)                         '<br />'
           5 - Max constraint.                     '<br />'
           6 - Smoothing & max constraints.        '<br />'
           7 - Min & max constraint.               '<br />'
           8 - Smoothing, min, & max constraints. '<br />'
           Any combination of constraints can be used. The mode value
           should be the sum of any single modes, for example mode=7
           activates both min and max constraints, while mode=8 uses all three of 
           them. Constraints are ignored if mode=0, but dummy values should
           still be entered on the next two lines.]

          .MINIMUM, MAXIMUM: 1.77, 1.90
          [Values of min and max constraints: i.e., the max and min values of
           the 2D projection data set.  Constraints are ignored if mode=0, 
           but dummy values must still be entered.]

          .SMOOTHING CONSTANT (0-0.999): 0.9994
          [Smoothing constant determines relative weight of the low-pass
           filtration. See note #4. Constraints are ignored if mode=0, 
           but a dummy value must still be entered.]

NOTES:    1. If the radius of the reconstructed circle is too large
             comparing to the size of projections, a warning is printed.
             The reconstruction is calculated, but it is incorrect
             along the boundary.

          2. Lambda is used to control the speed of convergence. '<br />'

             Too small value of lambda will result in a structure
             that has high frequencies under-represented.  The structure
             will appear very smooth.  Moreover, when such structures are
             used to estimate the resolution (operation 'RF 3') the Fourier
             Shell Correlation curve, after initial decrease, will increase
             in high frequencies region.  To remedy the problem, the
             lambda has to be increased (Try: 10 times).               '<br />'
             An ever smaller value of lambda value of lambda will give Fourier
             Shell Correlation curve that remains abnormally high for a long
             distance .  To remedy this problem,  lambda has to be increased 
             (Try: 100-1000 times).               '<br />'

             Too large value of lambda will terminate iterations too
             soon, earlier than requested number of iterations,
             usually after the first two or three steps.  This can be verified
             in the output stored in the results file.  The '<b>'resulting 
             structure will be incorrect.'</b>'  To remedy this problem
             lambda has to be decreased (Try: 2 times) and the operation 
             has to be repeated.  If the problem persists, lambda
             has be decreased again until the requested number of
             iterations is performed.

          3. The smoothing constant determines relative weight of the 
             low-pass filtration.
             It has to be larger than zero and smaller than one.
             In addition the smoothing constant has to be lower than
                1/(1+6*lambda).                

             Zero means no smoothing.                             '<br />'

             To achieve stronger low-pass filtration effect one can 
             decrease lambda and increase the smoothing constant. '<br />'

             Approximate frequency response:

             '<table cellpadding="4">'
             '<tr>' '<th>'Lambda'</th>''<th>'Smoothing constant '</th>''<th>'Res'n limit (pixels)'</th>''</tr>'
             '<tr>' '<td>' .5E-3'</td>''<td>' 0.990'</td>''<td>'   3'</td>''</tr>'
             '<tr>' '<td>' .5E-3'</td>''<td>' 0.997'</td>''<td>'   5'</td>''</tr>'
             '<tr>' '<td>' .1E-3'</td>''<td>' 0.9994'</td>''<td>' 10'</td>''</tr>'
             '</table>'

          4. It is assumed that projections are squares (NX=NY), so
             the output volume will have dimensions NX x NX x NX.

          5. This operation parallelized for use with MPI.

          6. Implemented by: Paul Penczek.

SUBROUTINES: BPRP, RPRQ, ASTA, PREPCUB_S, BCKPJ, PRJCQ, 
             SMT3_Q, DOMIN3_S, DOMAX3_S, DOCORS3_S, BMAX_C, BMIN_C,
             FMAX_Q, FMIN_Q, HIANG

CALLER:      VTIL2
@


1.55
log
@enter
@
text
@d107 4
@


1.54
log
@*** empty log message ***
@
text
@d21 1
a21 1
          .ENTER TEMPLATE FOR IMAGE FILE: PROJ***
d24 1
a24 1
          .ENTER FILE NUMBERS OR SELECTION DOC. FILE NAME: 1-700 
@


1.53
log
@*** empty log message ***
@
text
@d76 1
a76 2
           8 - Smoothing, min, & max constraints. ]

@


1.52
log
@*** empty log message ***
@
text
@d2 6
a7 2
BP RP     Back Projection - 3D, iterative, with constraints  ||*   BP RP   
                                                               02/12/12
a8 1
PURPOSE:  Calculates 3D reconstruction using constraints.
d11 2
a12 2
SEE ALSO: BP CG    
          BP CG 3    
a13 1
          BP 32F  
d17 1
a17 3
USAGE:    BP RP
            '&'nbsp; <or>     '<br />'
          BP RP [niter]       '<br />'
d19 1
a19 1
          iterations completed.]
d21 2
a22 2
          .ENTER TEMPLATE FOR 2-D IMAGE FILE: PROJ***
          [Enter template for projection input files.]
d25 2
a26 2
           [Enter projection file numbers or the name of the document 
           file which contains the projection file numbers in its 
d34 1
a34 1
          .ANGLES DOC FILE: ANGLES27
d37 1
a37 1
           columns.]
d39 1
a39 1
	  .SYMMETRIES ANGLES DOC FILE: ANGSYM
d51 1
a51 1
	  .RECONSTRUCTED 3-D FILE: VOLUME1001
d57 1
a57 1
           value will terminate the iterations too soon. (Note #3). '<br />'
d67 10
a76 11
           Mode determines the constraint(s) used:              '<br />'
           0 - No constraints.                    '<br />'
           1 - Smoothing.                         '<br />'
           2 - Min constraint.                    '<br />'
           3 - Smoothing & min constraints.       '<br />'
           4 - (No mode 4)                        '<br />'
           5 - Max constraint.                    '<br />'
           6 - Smoothing & max constraints.       '<br />'
           7 - Min & max constraint.              '<br />'
           8 - Smoothing, min, & max constraints.
           ]
d94 1
a94 3
NOTES:    1. The projections need not have power-of-2 dimensions.

          2. If the radius of the reconstructed circle is too large
d99 1
a99 1
          3. Lambda is used to control the speed of convergence. '<br />'
d119 1
a119 1
          4. The smoothing constant determines relative weight of the 
d139 1
a139 1
          5. It is assumed that projections are squares (NX=NY), so
d142 1
a142 1
          6. This operation parallelized for use with MPI.
d144 1
a144 1
          7. Implemented by: Paul Penczek.
@


1.51
log
@nx
@
text
@d3 1
a3 1
                                                               02/12/01
d18 1
a18 1
          [An optional register variable receives the number of 
d24 1
a24 1
          .ENTER FILE NUMBERS OR SELECTION DOC. FILE NAME: 1-700 OR IMAGES127
d52 1
a52 1
           [Name of the output file.]
d65 1
a65 1
          .ITERATION LIMIT, MODE: 25,8
a78 1

d90 1
a90 1
          .SMOOTHING CONST (0-0.999): 0.9994
d143 1
a143 1
             the output volume has dimensions NX x NX x NX.
d149 1
a149 1
SUBROUTINES: BPRP, RPRQ, ASTA, PREPCUB_S, BCKCQ, PRJCQ, 
@


1.50
log
@*** empty log message ***
@
text
@d108 1
a108 1
             used to estimate the resolution (command 'RF 3') the Fourier
d136 1
a136 1
             '<table cellpadding="4sssssss">'
d143 2
a144 2
          5. It is assumed that projections are squares (NSAM=NROW), so
             the output volume has dimensions NSAM x NSAM x NSAM.
@


1.49
log
@doc_file
@
text
@d150 1
a150 1
SUBROUTINES: BPRP, REDPRQ, RPRQ, ASTA, PREPCUB_S, BCKCQ, PRJCQ, 
@


1.48
log
@typo fixed, see also improved
@
text
@d25 3
a27 2
          [Enter projection file numbers or the name of the document file 
           containing projection file numbers in the first column.]
d35 3
a37 2
          [Enter the name of the document file containing Eulerian
           angles for the projections (psi, theta, phi).]
@


1.47
log
@*** empty log message ***
@
text
@d2 1
a2 1
BP RP     Back Projection - 3D, terative, with constraints  ||*   BP RP   
d8 3
a10 1
SEE ALSO: BP 3F     
a12 3
          BP CG    
          BP R2  
          BP S2    
a19 1

@


1.46
log
@code in : bprp.f
@
text
@d2 1
a2 1
BP RP     Back Projection - 3D, iterative, with constraints  ||*   BP RP   
@


1.45
log
@*** empty log message ***
@
text
@d150 1
a150 1
SUBROUTINES: REPS, REDPRQ, RPRQ, ASTA, PREPCUB_S, BCKCQ, PRJCQ, 
@


1.44
log
@*** empty log message ***
@
text
@d106 1
a106 1
             that has high frequencies underrepresented.  The structure
d109 1
a109 1
             Shell Correlation curve, after initial decrese, will increase
d136 1
a136 1
             '<table cellpadding="3">'
@


1.43
log
@*** empty log message ***
@
text
@d6 1
a6 1
          See: '<a href='"'../bp_overview.html'"'>Comparison of 'BP' operations'</a>'. 
@


1.42
log
@*** empty log message ***
@
text
@d6 1
d88 2
a89 1
           the 2D projection data set.]
d93 2
a94 1
           filtration. See note #4.]
d104 1
d111 2
a112 1
             lambda has to be increased (10 times).               '<br />'
d115 2
a116 2
             usually after first two or three steps.  This can be verified
             in the output stored in the results file.  '<b>'Resulting 
d118 2
a119 2
             the lambda has to be decreased (2 times) and the program
             has to be repeated.  If the problem persists, the lambda
d123 1
a123 1
          4. Smoothing constant determines relative weight of the 
d136 6
a141 6
           '<pre>'
             Lambda     Smoothing const    Res'n limit (pixels)
              .5E-3         0.990                 3
              .5E-3         0.997                 5
              .1E-3         0.9994               10
           '</pre>'
@


1.41
log
@named registers
@
text
@d2 1
a2 1
BP RP     Back Projection - 3D, iterative, with constraints, ||*   BP RP   
d16 1
a16 1
          '&'nbsp; <OR>       '<br />'
d18 3
d30 1
a30 1
          [Enter radius of reconstructed object (smaller than the
d36 1
a36 1
           angles for the projections used (psi, theta, phi).]
d39 1
a39 1
           [Enter '<B>'*'</B>' if the structure has no symmetries.'<BR>'
d66 13
a78 5
           Mode determines the constraints used:              '<br />'
           0 - no constraints,                                '<br />'
           1 - frequency limit (smoothing),                   '<br />'
           2 - min constraint,                                '<br />'
           5 - max constraint.                                '<br />'
d121 1
a121 1
             In addition smoothing constant has to be lower than
d141 1
a141 6
          6. Memory requirement: 2*(NSAM**3)

          7. An optional register on the OPERATION line receives
            the number of iterations completed.

          8. This operation parallelized for use with MPI.
d143 1
a143 1
          9. Implemented by: Paul Penczek.
@


1.40
log
@no bpmem2
@
text
@d16 2
a17 2
           <OR>       '<br />'
          BP RP,X11   '<br />'
d50 2
a51 2
          .LAMBDA, CORRECTION LIMIT: 1.0e-4,0.0
          ['<B>'Lambda'</B>' determines the weight of corrections. Too small a
d53 2
a54 2
           value will terminate the iterations too soon. (Note #3). '<BR>'
           '<B>'Correction limit'</B>' can be used to terminate the iterations.
d62 6
a67 6
          [Program will terminate after number of iterations given. '<BR>'
           Mode determines the constraints used:              '<BR>'
           0 - no constraints,                                '<BR>'
           1 - frequency limit (smoothing),                   '<BR>'
           2 - min constraint,                                '<BR>'
           5 - max constraint.                                '<BR>'
d74 1
a74 1
          .MINIMUM, MAXIMUM: 1.77,1.90
d78 1
a78 1
          .SMOOTHING CONST (0-0.999):0.9994
d89 1
a89 1
          3. Lambda is used to control the speed of convergence.'<BR>'
d93 1
a93 1
             used to estimate the resolution (command RF 3) the Fourier
d96 1
a96 1
             lambda has to be increased (10 times).'<BR>'
d113 1
a113 1
             Zero means no smoothing.                             '<BR>'
d116 1
a116 1
             decrease lambda and increase the smoothing constant. '<BR>'
d120 2
a121 2
           '<PRE>'
             lambda     smoothing const    res'n limit (pixels)
d125 1
a125 1
           '</PRE>'
@


1.39
log
@*** empty log message ***
@
text
@a10 1
          BP MEM2 
@


1.38
log
@MPI
@
text
@d2 1
a2 1
BP RP     Back Projection - 3D, iterative, with constraints, ||MPI   BP RP   
d7 8
a14 8
SEE ALSO: BP 3F   (3D reconstruction using interpolation in Fourier space.)
          BP 32F  (3D reconstruction using interpolation in Fourier space.)
          BP 3D   (Back Projection - 3D, using Euler angles, ||)
          BP CG   (Back Projection - 3D, conjugate gradients, ||)
          BP MEM2 (Back Projection - 2D maximum entropy method)
          BP R2   (Back Projection - 2D, R**2 weighting of the image series)
          BP S2   (Back Projection - 2D, single tilt iterative, with constraints)
          BP W2   (Back Projection - 2D, filtered weighted)
@


1.37
log
@added more info on constraints (using Pawel's response)
@
text
@d2 1
a2 1
BP RP     Back Projection - 3D, iterative, with constraints, ||   BP RP   
d17 2
a18 2
           <OR> '<BR>'
          BP RP,X11'<BR>'
d136 3
a138 1
          8. Implemented by: Paul Penczek.
@


1.36
log
@added documentation for mode=0
@
text
@d65 1
d69 1
a69 1
           Any combination of constraints can be used. The mode answered
d71 1
a71 1
           activates both min and max constraints, mode=8 all three of 
d73 1
a73 1
           still be entered on the next two lines .]
d76 2
a77 2
          [Values of min and max constraints. They relate to the values
           in 2D projection data.]
@


1.35
log
@*** empty log message ***
@
text
@d71 2
a72 1
           them.]
@


1.34
log
@*** empty log message ***
@
text
@d37 10
a46 10
	  [Enter '<B>'*'<\B>' if the structure has no symmetries.'<BR>'
	   Otherwise, enter the name of the document file containing
	   Eulerian angles defining symmetries (psi, theta, phi). The
	   angles should be such that when used in operation 'RT 3D'
	   they transform the volume into itself.  The identity
	   operation (angles 0,0,0) MUST be included.  The symmetries
	   will be internally enforced on the volume.  The
	   reconstruction in this case is calculated as though the
	   projections were multiplied as many times as there are
	   symmetries.]
d49 1
a49 1
	  [Name of the output file.]
d127 1
a127 1
             the output volume has dimensions NSAMxNSAMxNSAM.
@


1.33
log
@symmetries question corrected.
@
text
@d2 2
a3 2
BP RP     Back Projection - 3D, iterative, with constraints, ||     BP RP   
                                                             02/12/01
d36 11
a46 13
          .SYMMETRIES ANGLES DOC FILE: ANGSYM
          [Enter '<b>'*'<b>' if the structure has no symmetries.'<BR>'
           Otherwise, enter the name of the document file containing Eulerian
           angles defining symmetries (psi, theta, phi). The angles
           should be such that when used in operation 'RT 3D' transform
           the volume into itself.  The identity operation 
           (angles 0,0,0) MUST be included.  The symmetries will be internally
           enforced on the volume.  The reconstruction in this case is
           calculated as though the projections were multiplied
           as many times as there are symmetries.]
                
          .RECONSTRUCTED 3-D FILE: VOLUME1001
          [Name of the output file.]
d48 3
d136 1
a136 1
SUBROUTINES: REPS, REDPRQ, RPRQ, ASTA, PREPCUB_S, BCKCQ, PRJCQ, REPR3_Q, 
@


1.32
log
@*** empty log message ***
@
text
@d3 1
a3 1
                                                             08/03/00
a34 8
                
          .DOES YOUR VOLUME HAVE SYMMETRIES? (Y/N): Y
          [Answer Yes if you want the symmetries to be internally
           enforced on your volume.  The reconstruction in this case is
           calculated as though the projections were multiplied
           as many times as there are symmetries.]

    If the answer was 'Y' SPIDER will ask:
d37 2
a38 1
          [Enter the name of the document file containing Eulerian
d42 4
a45 1
           (angles 0,0,0) MUST be included.]
@


1.31
log
@added x for iteration
@
text
@d3 1
a3 1
                                                             05/03/99
@


1.30
log
@*** empty log message ***
@
text
@d17 2
d134 4
a137 1
          7. Implemented by: Paul Penczek.
@


1.29
log
@list of subroutines updated
@
text
@d134 1
a134 1
SUBROUTINES: REPS, REDPRQ, ASTA, PREPCUB_S, BCKCQ, PRJCQ, REPR3_Q, 
@


1.28
log
@selection file
@
text
@d134 1
a134 1
SUBROUTINES: REPS, REDPRQ, RPRQ, ASTA, PREPCUB_S, BCKCQ, PRJCQ, REPR3_Q, 
@


1.27
log
@*** empty log message ***
@
text
@d21 3
a23 3
          .SELECTION DOC FILE: IMAGES127
          [Enter the name of the document file containing projection
           file numbers in the first column.]
@


1.26
log
@corrected subroutine names
@
text
@d80 1
a80 1
           filtration. See note #3.]
@


1.25
log
@*** empty log message ***
@
text
@d135 1
a135 1
             SMT3_Q, DOMIN3_S, DOMAX3_S, DOCORS3_S, BMAX_S, BMIN_S,
@


1.24
log
@lambda explained
@
text
@d53 1
a53 1
          [Lambda determines the weight of corrections. Too small a
d55 2
a56 2
           value will terminate the iterations too soon. (Note #3). 
           Correction limit is used to terminate the iterations.
d59 3
a61 2
           terminated. When correction limit is set to zero,
           this criterion is not used.]
d64 1
a64 1
          [Program will terminate after number of iterations given.
@


1.23
log
@*** empty log message ***
@
text
@d55 1
a55 1
           value will terminate the iterations too soon.
d88 19
a106 1
          3. Smoothing constant determines relative weight of the 
d126 1
a126 1
          4. It is assumed that projections are squares (NSAM=NROW), so
d129 1
a129 1
          5. Memory requirement: 2*(NSAM**3)
d131 1
a131 1
          6. Implemented by: Paul Penczek.
@


1.22
log
@*** empty log message ***
@
text
@d10 1
a10 1
          BP CG   Back Projection - 3D, conjugate gradients, ||)
@


1.21
log
@see also updated
@
text
@d7 3
a9 1
SEE ALSO: BP 3D   (Back Projection - 3D, using Euler angles, ||)
@


1.20
log
@*** empty log message ***
@
text
@d3 1
a3 1
                                                           04/23/97
d7 3
a9 1
SEE ALSO: BP MEM2 (Back Projection - 2D maximum entropy method)
@


1.19
log
@*** empty log message ***
@
text
@d7 1
a7 7
SEE ALSO: BP 3    (Back Projection - 3D, iterative (ART))
          BP 3D   (Back Projection - 3D, using Euler angles, ||)
          BP 3E   (Back Projection - 3D, using Euler angles)
          BP CTF  (Back Projection - 3D, CTF correction, ||)
          BP GW   (Back Projection - weighted, arbitrary geometry)
          BP GW3  (Back Projection - weighted, arbitrary geometry, 3 angles)
          BP MEM2 (Back Projection - 2D maximum entropy method)
a10 3
          BP WX   (Back Projection - weighted, X)
          BP WY   (Back Projection - weighted, Y)
          BP XY   (Back Projection - simple for single axis & conical tilting)
@


1.18
log
@ changed SEE ALSO, title & cosmetic
@
text
@d122 1
a122 1
             FMAX_Q, FMIN_Q
@


1.17
log
@improved
@
text
@d2 1
a2 1
BP RP     3D Iterative Reconstruction With Constraints ||     BP RP   
d7 13
a19 15
SEE ALSO:  BP 3     (ART Back Projection - 3D)
           BP 3D    (3D Reconstruction - using three Eulerian angles)
           BP 3E    (Back Projection in X-Y planes) 
           BP CTF   (3D Reconstruction with CTF correction)  
           BP GW    (3D reconstruction with general weighting)
           BP GW3D  (General Weighting function in 3D)
           BP LOCAL (Back projection calculated to specific local area)
           BP MEM2  (2D reconstruction by Max. Entropy Method)
           BP R2    (R**2 weighting for 2D)
           BP S2    (2D Single-tilt Iterative Recon. With Constraints)
           BP W2    (2D filtered, weighted back projection)
           BP WX    (Weighted Back Projection)
           BP WY    (Weighted Back Projection)
           BP XY    (Back Projection in X-Y planes)
           RT 3D    (Rotate volume)
@


1.16
log
@*** empty log message ***
@
text
@d25 2
a26 2
          .ENTER TEMPLATE FOR 2-D IMAGE FILE: PROJ001
          [Enter the name of any projection from the set.]
d120 1
a120 1
          6. Implemented by Paul Penczek.
@


1.15
log
@changed promps, formatting for html
@
text
@d2 1
a2 1
BP RP     3D Iterative Reconstruction With Constraints        BP RP   
d9 2
a10 1
           BP 3E    (Back Projection in X-Y planes)   
@


1.14
log
@*** empty log message ***
@
text
@d2 2
a3 2
BP RP     3D Iterative Reconstruction With Constraints ||     BP RP   
                                                           08/16/96
d20 1
d24 1
a24 1
          .Enter template for 2-D image file: PROJ001
d27 1
a27 1
          .Selection doc file: images127
d31 1
a31 1
          .Radius of restored object: 23
d36 1
a36 1
          .Angles doc file: ANGLES27
d40 1
a40 1
          .Does your volume have symmetries ?: Y
d46 3
a48 2
    If the answer was Yes:
          .Symmetries ang doc file: ANGSYM
d51 1
a51 1
           should be such that when used in operation RT 3D transform
d55 1
a55 1
          .Reconstructed 3-D file: VOLUME1001
d58 1
a58 1
          .Lambda, Correction limit: 1.0e-4,0.0
d68 1
a68 1
          .Iteration limit, Mode: 25,8
d70 4
a73 4
           Mode determines the constraints used:
           1 - frequency limit (smoothing),
           2 - min constraint,
           5 - max constraint.
d79 1
a79 1
          .Minimum, maximum: 1.77,1.90
d83 1
a83 1
          .Smoothing const (0-0.999):0.9994
a86 1

d117 1
a117 1
          5. Memory requirement: 2*(NSAM^3)
@


1.13
log
@typo
@
text
@d2 1
a2 1
BP RP     3D Iterative Reconstruction With Constraints      BP RP   
@


1.12
log
@*** empty log message ***
@
text
@d3 1
a3 1
                                                           08/25/94
d107 1
a107 1
             lambda     smoothing const    res'n limit (pixels0
@


1.11
log
@work on notes
@
text
@d41 1
a41 1
           inforced on your volume.  The reconstruction in this case is
@


1.10
log
@uppercase, and tags added
@
text
@d107 4
a110 4
             lambda     smoothing const    resolution limit in pixels
             5.0E-4        0.990                 3
             5.0E-4        0.997                 5
             1.0E-4        0.9994               10
@


1.9
log
@html tweaking
@
text
@d7 2
a8 2
SEE ALSO:  BP 3     ((ART) Back Projection - 3D)
           BP 3D    ((3D Reconstruction - using three Eulerian angles)
d12 1
a12 1
           BP LOCAL (Back projection calculated to a specific local area)
d97 1
a97 1
                1/(1+6*lambda).
d99 1
a99 1
             Zero means no smoothing.
d102 1
a102 1
             decrease lambda and increase the smoothing constant.
d108 3
a110 3
             5.0E-4        0.990                3
             5.0E-4        0.997                5
             1.0E-4        0.9994              10
d120 3
a122 3
subroutines: REPS, REDPRQ, RPRQ, asta, PREPCUB_s, BCKCQ, PRJCQ, repr3_q, 
             smt3_q, domin3_s, domax3_s, docors3_s, bmax_s, bmin_s,
             fmax_q, fmin_q
d124 1
a124 1
caller:      VTIL2
@


1.8
log
@html bug
@
text
@d106 1
a106 1
'<PRE>'
d111 1
a111 1
'</PRE>'
@


1.7
log
@ed. for html fix
@
text
@d81 1
a81 1
          .Smoothing const (0-0.999):0.994
@


1.6
log
@add bp gw3d line
@
text
@d51 1
a51 1
           (angles 0,0,0) HAS TO be included.]
d57 2
a58 2
          [Lambda determines the weight of corrections. Too small
           value results in long time of calculations, too large
d62 3
a64 3
           smaller than the preset value the iterations are
           terminated. When correction limit is set to zero
           this criterium is not used.]
d81 2
a82 2
          .Smoothing const (0-0.999):0.9994
          [Smoothing constant determins relative weight of the low-pass
d86 1
a86 1
NOTE:     1. The projections do not have to have power-of-2 dimensions.
d89 1
a89 1
             comparing to the size of projections the warning is printed.
d91 1
a91 1
             on the boundary.
d98 1
d100 1
d102 2
a103 1
                decrease lambda and increase smoothing constant.
d105 2
d111 1
a114 1

@


1.5
log
@fixed see also listings
@
text
@d11 1
@


1.4
log
@format corrected
@
text
@d7 12
a18 9
SEE ALSO:  BP 3    ((ART) back projection - 3D)
           BP GW   (3D reconstruction with general weighting)
           BP MEM2 (2D reconstruction by max. entropy method)
           BP R2   (R**2 weighting for 2D)
           BP S2   (2D single-tilt iterative recon. with constraints)
           BP W2   (2D filtered, weighted back projection)
           BP WX   (Weighted back projection)
           BP WY   (Weighted back projection)
           BP XY   (Back projection in X-Y planes)
a19 1

d110 1
a110 1
Memory requirement: 2*(NSAM^3)
d112 1
a112 1
Implemented by Paul Penczek.
d114 1
a114 1
Subroutines: REPS, REDPRQ, RPRQ, asta, PREPCUB_s, BCKCQ, PRJCQ, repr3_q, 
d117 2
a118 1
Caller:      VTIL2
@


1.3
log
@*** empty log message ***
@
text
@d4 3
a16 2

PURPOSE:  Calculates 3D reconstruction using constraints.
@


1.2
log
@replaced_tabs
@
text
@d3 10
a12 14
                                                           01/14/94
SEE ALSO:  BP 3  ( (ART) Back Projection - 3D)
           BP GW  (3D reconstruction with
           general weighting)
           BP MEM2  (2D reconstruction by
           Max. Entropy Method)
           BP R2  (R**2 weighting for 2D)
           BP S2   (2D Single-tilt Iterative
           Reconstruction With Constraints)
           BP W2  (2D filtered weighted Back
           Projection)
           BP WX  (weighted Back Projection)
           BP WY  (weighted Back Projection)
           BP XY  (Back Projection in X-Y planes)
d46 2
a47 2
           the volume into itself.  The identity operation (angles 0,0,0)
           HAS TO be included.]
d70 2
a71 1
           activates both min and max constraints, mode=8 all three of them.]
d89 2
a90 2
          3. Smoothing constant determines relative weight of the low-pass
             filtration.
d92 2
a93 1
             In addition smoothing constant has to be lower than 1/(1+6*lambda).
d95 2
a96 2
             To achieve stronger low-pass filtration effect one can decrease
             lambda and increase smoothing constant.
d112 3
a114 3
             smt3_q, domin3_s, domax3_s, docors3_s, bmax_s, bmin_s, fmax_q, 
             fmin_q
Cotask:      VTIL2
@


1.1
log
@Initial revision
@
text
@@
