<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<title>SPIDER: Using FFTW</title>
</head>

<body>
<h1 align="center">Using FFTW WITH SPIDER</h1>

<p>
The <a href="http://www.fftw.org/">FFTW</a> (The Fastest Fourier
Transform in the West) is a 'C' subroutine library for computing
the Discrete Fourier Transform in one or more dimensions, of
both real and complex data, and of arbitrary input size. The FFTW
package was developed at MIT by Matteo Frigo and Steven G. Johnson.
They believe that <cite>" FFTW's performance is typically superior
to that of other publicly available FFT software. Moreover, FFTW's
performance is portable: the program will perform well on most
architectures without modification."</cite> 
</p>

<p> FFTW is <a href="http://www.gnu.org/philosophy/categories.html">
'free open source software'</a> distributed under the 
<a href= "http://www.gnu.org/copyleft/gpl.html">GNU General Public
License</a>.</p>
 
<p>FFTW version 3.2.1 is now used within default versions of SPIDER 
on Linux and OSX for calculating Fourier transforms.
<small>Note: FFTW 2 is still used within SPIDER for MPI.</small></p>
   
<p>Since SPIDER is now distributed under the
GPL license we can now include statically linked FFTW libraries 
within our SPIDER distribution. 

<b>Unless you wish to recompile/relink SPIDER you do not have to
install FFTW and can ignore the rest of the information
on this page.</b>  </p>

<hr />

<p><h4>If you wish to recompile/link FFTW for use with SPIDER On 
      GNU/Linux or OS X</h4></p>

<ul>
<li>

   <p>FFTW3 code is
   accessed by defining the preprocessor variable: <i>SP_LIBFFTW3</i>
   when compiling and linking SPIDER. See: 
   <a href="../src/Makefile_linux_mp_opt64">Makefile_linux_mp_opt64</a> for
   example of how this is done. </p>

   <p>The SPIDER distribution contains five sets of FFTW
   code and associated object code libraries for use with different
   platforms: 
 
   <ul>
   <li><a href="../fftw/fftw3-32">   AMD/Intel Linux 32 bits</a> </li>
   <li><a href="../fftw/fftw3-opt64">AMD Linux 64 bits</a>       </li>
   <li><a href="../fftw/fftw3-intel">Intel Xeon Linux 32 bits</a></li>
   <li><a href="../fftw/fftw-osx-32">Intel OSX 32 bits</a>       </li>
   <li><a href="../fftw/fftw-osx-64">Intel OSX 64 bits</a>       </li>
   </ul>
 
   <p>The spider executables included with your distribution have been
   statically linked with the respective libraries for these 
   platforms. 
   <a href= "../fftw/fftw3-32/lib">    fftw3-32/lib</a>,
   <a href= "../fftw/fftw3-opt64/lib"> fftw3-opt64/lib</a>,
   <a href= "../fftw/fftw3-intel/lib"> fftw3-intel/lib</a>,
   <a href= "../fftw/fftw3-osx-32/lib">fftw3-osx-32/lib</a>,
   <a href= "../fftw/fftw3-osx-64/lib">fftw3-osx-64/lib</a> </p>

   <p>If you wish to recompile FFTW-3.2.1: <br />
   </ps>

   <ol>

   <p><li>Create new directory in: <i>spider/fftw</i> <br />
   <i>mkdir spider/fttw/fftw3-new</i>                 <br />
   <i>cd spider/fttw/fftw3-new</i>  </li>
   <p/>
 
   <p><li>
   <a href="http://www.fftw.org/download.html">Download FFTW3 
   </a> from <i>www.fftw.org</i></li></p>

   <p><li>Extract the software:              <br />
   e.g. <i>gunzip fftw-3.2.1.tar.gz</i>      <br />
   e.g. <i>tar xvf fftw-3.2.1.tar</i></i>    <br />
   e.g. <i>mv fftw-3.2.1/* .</i>    </p>

   <p><li>Set compiler location                          <br />
   e.g. <i>setenv F77  /opt/intel_fc_80/bin/ifort</i>    <br />
   e.g. <i>setenv CC   /opt/intel_cc_80/bin/icc</i></li> </p>

   <p><li>Configure FFTW installation                    <br />
   <small>Note: configure options for 3.2.1 are <b>NOT</b> same as for
   earlier FFTW releases.</small>                         <br />  
    e.g. <i>./configure --enable-float  --with-openmp</i></li> </p>

   <p><li>Build FFTW     <br />
   e.g. <i>make</i></li> </p>

   <p><li>Make library directory and put FFTW3 libraries there:    <br />
   e.g. <i>mkdir &nbsp;&nbsp;  lib</i>                             <br />
   e.g. <i>cp ./.libs/libfftw3f.a ./threads/.libs/libfftw3f_threads.a &nbsp;&nbsp; lib </i></li> </p>

   <p><li>Link your SPIDER with the libraries in:  
   <i>spider/fttw/fftw3-new/lib</i> </p>
   </ol>
</ul>

<hr>
<small>Source file: fftw.html &nbsp;&nbsp;&nbsp; 
      Updated: 9 Apr. 2009    &nbsp;&nbsp;&nbsp; 
      ArDean Leith
</small>

</body>
</html>

