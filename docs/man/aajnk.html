<head>
<title>SPIDER: AC (Auto Correlation ||)</title>
   <link rel='stylesheet' type='text/css' href='../buttons.css' />

</head>
<body>
<!-- Begin Buttons -->
<table>
<tr>
  <td><a href="../spider.html"                id="spider">    </a></td>
  <td><a href="../user_doc.html"              id="work">      </a></td>
  <td><a href="../operations_doc.html"        id="index">     </a></td>
  <td><a href="../documents.html"             id="help">      </a></td>
  <td><a href="../faq.html"                   id="faq">       </a></td>
  <td><a href="../documents.html#2D"          id="techs">     </a></td>
  <td><a href="../techs/recon1/Docs/mr1.html" id="recon">     </a></td>
  <td><a href="../formats.html"               id="menu">      </a></td>
  <td><a href="../installation.html"          id="install">   </a></td>
  <td><a href="../release.html"               id="new">       </a></td>
  <td><a href="../tips/index.html"            id="tips">      </a></td>
  <td><a href="../../web/docs/web.html"              id="web">       </a></td>
</tr>
</table>
<br><hr>
<!-- End Buttons -->

<h2>AC - Auto Correlation ||</h2>
<em>(02/25/00)</em><br>
<p>
<dl><dt><strong>PURPOSE</strong>
<p>
<dd>Computes the auto-correlation function of a picture by
using the Fourier transform relationship. The dimension
of the picture need not be a power of two (see 'FT' for
restrictions). Works for 2D and 3D.
</dl>
<p>
<dl><dt><strong>SEE ALSO</strong>
<p>
<dd><table><tr><td><a href="acn.html"><strong>AC N</strong></a></td><td> [Auto Correlation - Normalized ||]</td></tr>
<tr><td><a href="acms.html"><strong>AC MS</strong></a></td><td> [Auto Correlation - Masked and normalized ||]</td></tr>
<tr><td><a href="cc.html"><strong>CC</strong></a></td><td> [Cross Correlation ||]</td></tr>
<tr><td><a href="ccn.html"><strong>CC N</strong></a></td><td> [Cross Correlation - Normalized ||]</td></tr>
<tr><td><a href="cn.html"><strong>CN</strong></a></td><td> [Convolution ||]</td></tr>
<tr><td><a href="cnn.html"><strong>CN N</strong></a></td><td> [Convolution - Normalized ||]</td></tr>
<tr><td><a href="ft.html"><strong>FT</strong></a></td><td> [Fourier Transform ||]</td></tr>
</table></dl>
<p>
<dl><dt><strong>USAGE</strong>
<p>
<dd>.OPERATION: AC<br>
<p>
<dd>.INPUT FILE: PIC001<BR>
[Enter the name of the picture to be auto-correlated.]
<p>
.OUTPUT FILE: ACF001<BR>
[Enter name of the file which will contain the auto-correlation
coefficients.]
<p>
</dl>
<p>
<strong>NOTES</strong>
<ol>
<p>
<li>On completion of this operation, the output file will contain
the auto-correlation function. The origin is at
(NSAM/2 + 1, NROW/2 + 1). The ACF is not normalized.
<p>
<h4>Current Layout of the SPIDER Header (Label) Record</h4>
</p>

<p>
<table border="1" cellpadding="4">
   <tr> <th>Location</th> <th>Name</th> <th>Content</th> </tr>

   <tr><td> 1</td><td>NSLICE</td>  <td> Number of slices (planes) in volume (=1 for an image)
      <small> In some ancient 2D images this may be -1) </small> </td></tr>

   <tr><td> 2</td><td>NROW</td>    <td> Number of rows per slice. </td></tr>

   <tr><td> 3</td><td>IREC</td>    <td> Total number of records (including header records) 
            in each image of a simple image or stacked image file.</td></tr>

   <tr><td> 4</td><td>UNUSED</td><td>Unassigned</td></tr>

   <tr><td> 5</td><td>IFORM</td>   <td> File type specifier.
   <table border="1" cellpadding="8">
      <tr> <td></td> </tr>
      <tr> <td align="middle">  1</td>  <td>R</td>  <td>2D image. </td>  </tr>
      <tr> <td align="middle">  3</td>  <td>R</td>  <td>3D volume.</td>  </tr>
      <tr> <td align="middle">-11</td>  <td>FO</td> <td>2D Fourier, mixed radix odd</td> </tr>
      <tr> <td align="middle">-12</td>  <td>FE</td> <td>2D Fourier, mixed radix even</td> </tr>
      <tr> <td align="middle">-21</td>  <td>FO</td> <td>3D Fourier, mixed radix odd</td> </tr>
      <tr> <td align="middle">-22</td>  <td>FE</td> <td>3D Fourier, mixed radix even</td> </tr>
   </table>
   </td></tr>

   <tr><td> 6</td><td>IMAMI</td><td>Maximum/minimum flag = 0 when the file is
      created, and = 1 when the maximum, minimum, average, and standard
      deviation have been computed and stored into this header record
      (see following locations).</td></tr>

   <tr><td> 7</td><td>FMAX</td>    <td>Maximum data value.</td></tr>

   <tr><td> 8</td><td>FMIN</td>    <td>Minimum data value.</td></tr>

   <tr><td> 9</td><td>AV</td>      <td>Average data value.</td></tr>

   <tr><td>10</td><td>SIG</td>     <td>Standard deviation of data. A value of 
          -1.0 or 0.0  indicates that SIG has not been computed.</td></tr>

   <tr><td>11</td><td>UNUSED</td>  <td>Obsolete, no longer used.</td></tr>

   <tr><td>12</td><td>NSAM</td>    <td>Number of pixels (samples) per line.</td></tr>

   <tr><td>13</td><td>LABREC</td>  <td>Number of records in file header (label).</td></tr>

   <tr><td>14</td><td>IANGLE</td>  <td>Flag that following three tilt angles are present.</td></tr>

   <tr><td>15</td><td>PHI</td>     <td>Tilt angle: phi (See note #2 below).</td></tr>

   <tr><td>16</td><td>THETA</td>   <td>Tilt angle: theta.</td></tr>

   <tr><td>17</td><td>GAMMA</td>   <td>Tilt angle: gamma (also called psi).</td></tr>

   <tr><td>18</td><td>XOFF</td>    <td>X translation.</td></tr>

   <tr><td>19</td><td>YOFF</td>    <td>Y translation.</td></tr>

   <tr><td>20</td><td>ZOFF</td>    <td>Z translation.</td></tr>

   <tr><td>21</td><td>SCALE</td>   <td>Scale factor.</td></tr>

   <tr><td>22</td><td>LABBYT</td>  <td>Total number of bytes in header.</td></tr>

   <tr><td>23</td><td>LENBYT</td>  <td>Record length in bytes.</td></tr>

   <tr><td>24</td><td>ISTACK/<br/>MAXINDX</td><td>Position has a value of <i>0</i> in 
       simple 2D or 3D (non-stack) files. In an "image stack" there is one overall
       stack header followed by a stack of images, in which each image has
       its own image header.  A value of
       <i>&gt;0</i> in this position in the overall stack header indicates
       a stack of images. A value of <i>&lt;0</i> in this position in the
       overall stack header indicates an indexed stack of images and gives
       the maximum image number (MAXINDX) allowed in the index. </td></tr>

   <tr><td>25</td><td>UNUSED</td><td>Unused now. Prior to release
      <i>9.0</i>, a '-1' at this location in an overall stack indicated a
      valid stack and in the stacked images, a value of 1 indicated that
      this image was in use (existed).</td></tr>

   <tr><td>26</td><td>MAXIM</td><td>Position is only used in the overall header 
      for a stacked image file. There, this position contains the number of the
      highest image currently used in the stack. This number is updated,
      if necessary, when an image is added or deleted from the stack.</td></tr>

   <tr><td>27</td><td>IMGNUM</td><td>Position is only used 
      in a stacked image header. There, this position contains the number
      of the current image or zero if this image is unused.</td></tr>

   <tr><td>28</td><td>LASTINDX</td><td>Position is only used 
      in overall header of indexed stacks. There, this position is 
      the highest index location currently in use.</td></tr>

   <tr><td>29</td><td>UNUSED</td><td>Unassigned</td></tr>

   <tr><td>30</td><td>UNUSED</td><td>Unassigned</td></tr>

   <tr><td>21</td><td>KANGLE</td><td>Flag that additional rotation angles follow 
      in header. 1 = one angle set is present, 2 = two additional angle sets.  
      These rotation angles preceed any rotation stored in positions: 15..18.</td></tr>

   <tr><td>32</td><td>PHI1</td>       <td>Angle.</td></tr>

   <tr><td>33</td><td>THETA1</td>     <td>Angle.</td></tr>

   <tr><td>34</td><td>PSI1</td>       <td>Angle.</td></tr>

   <tr><td>35</td><td>PHI2</td>       <td>Angle.</td></tr>

   <tr><td>36</td><td>THETA2</td>     <td>Angle.</td></tr>

   <tr><td>37</td><td>PSI2</td>       <td>Angle.</td></tr>

   <tr><td>38</td><td>PIXSIZ</td>     <td>Pixel size (Angstroms).</td></tr>

   <tr><td>39</td><td>EV</td>         <td>Electron voltage used.</td></tr>

   <tr><td>40-49</td><td>UNUSED</td>  <td>Unassigned.</td></tr>

   <tr><td> 50-76 </td><td>-</td>     <td>Reserved for local transforms</td></tr>

   <tr><td> 77-100</td><td>-</td>     <td>Unassigned.</td></tr>

   <tr><td> 101 </td><td>PSI3</td>    <td>Projection angle: Psi  (From 'PJ 3Q').</td></tr>

   <tr><td> 102 </td><td>THETA3</td>  <td>Projection angle: Theta (From 'PJ 3Q').</td></tr>

   <tr><td> 103 </td><td>PHI3</td>    <td>Projection angle: Phi (From 'PJ 3Q').</td></tr>

   <tr><td> 104 </td><td>LANGLE</td>  <td> If = 1 flag that Projection angles:  
        PSI3, THETA3 & PHI3 are present in header. </td></tr>

   <tr><td> 105-211 </td><td>-</td> <td>Unassigned</td></tr>

   <tr><td> 212-214</td><td>CDAT</td><td>Character *11    Creation date e.g. 27-MAY-1999 </td></tr>

   <tr><td> 215-216</td><td>CTIM</td><td>Character *8     Creation time e.g. 09:43:19 </td></tr>

   <tr><td> 217-256 </td><td>CTIT</td><td>Character *160  Title </td></tr>
</table>

<p />
<p>
<li>The type of input data can be either real or Fourier.
<p>
<li>If the data cannot fit into the memory, use the 'FT' and 'MU'
commands to calculate the ACF:
         <PRE> 
              FT 
              INPUT 
              FOUR 
              SQ 
              FOUR 
              MODFT 
              FT 
              MODFT 
              ACF 
</PRE>
<STRONG>WARNING</STRONG>: The orgin of the ACF calculated in
this way is in (1,1).
</ol>
<p>
<dl><dt><strong>SUBROUTINES</strong>
<p>
<dd><a href="../../src/fmrs_2.f">FMRS_2</a>, <a href="../../src/fmrs_2r.f">FMRS_2R</a>, <a href="../../src/fftmcf.f">FFTMCF</a>, <a href="../../src/fmrs_1.f">FMRS_1</a>, <a href="../../src/fmrs_3.f">FMRS_3</a>, <a href="../../src/fmrs_3r.f">FMRS_3R</a>, <a href="../../src/acrs_2.f">ACRS_2</a>, <a href="../../src/acrs_3.f">ACRS_3</a></dl>
<p>
<dl><dt><strong>CALLER</strong>
<p>
<dd><a href="../../src/corr1.f">CORR1</a> 
</dl>
<!-- Begin Trailer -->
<hr> <small>&copy; <a href="../copyright.html"> 
   Copyright Notice</a> /           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  
   Enquiries: <a href="mailto:spider@wadsworth.org">spider@wadsworth.org</a> </small></a>
<!-- End Trailer -->
</body>
</html>