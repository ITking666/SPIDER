head	1.13;
access;
symbols;
locks; strict;
comment	@# @;


1.13
date	2014.02.05.10.17.56;	author tapu;	state Exp;
branches;
next	1.12;

1.12
date	2014.02.04.19.58.48;	author tapu;	state Exp;
branches;
next	1.11;

1.11
date	2014.01.24.08.19.45;	author tapu;	state Exp;
branches;
next	1.10;

1.10
date	2014.01.24.08.00.42;	author tapu;	state Exp;
branches;
next	1.9;

1.9
date	2014.01.20.22.37.08;	author tapu;	state Exp;
branches;
next	1.8;

1.8
date	2013.08.16.14.20.59;	author leith;	state Exp;
branches;
next	1.7;

1.7
date	2012.12.15.03.17.43;	author tapu;	state Exp;
branches;
next	1.6;

1.6
date	2012.04.13.21.56.18;	author tapu;	state Exp;
branches;
next	1.5;

1.5
date	2012.04.13.21.48.02;	author tapu;	state Exp;
branches;
next	1.4;

1.4
date	2012.01.31.18.22.21;	author tapu;	state Exp;
branches;
next	1.3;

1.3
date	2009.08.03.18.01.16;	author leith;	state Exp;
branches;
next	1.2;

1.2
date	2008.12.16.14.51.27;	author leith;	state Exp;
branches;
next	1.1;

1.1
date	2008.12.16.14.24.26;	author leith;	state Exp;
branches;
next	;


desc
@Tapu's text from 15 Dec 2008
@


1.13
log
@Fixed typo (SPIDER configuration -> SPIRE configuration)
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
    <title>MSA</title>
</head>
<body>


<p align="center">
<font size="7">Multivariate Data Analysis</font> <br />
<font size="4">Previously known as multivariate statistical analysis</font>
</p>

<hr />

<p>There are essentially only four steps here:</p>
<ol>
    <li>Low-pass filtration </li>
    <li>Alignment in two dimensions </li>
    <li>Dimension-reduction -- expression of a <i>m</i>x<i>n</i> image 
        using only a few terms, i.e., eigenvectors </li> 
    <li>Classification </li> 
</ol>

<p>
   The low-pass filtration is optional, but if you plan to look at individual 
   particles, this step will help.
</p>

<p>
   For the classification below to be sensible, the images will need to 
   have been aligned. The alignment step here is optional if the images 
   have been aligned already. 
</p>

<p>
   The dimension-reduction step is even optional, in theory. In principle, 
   one could classify the raw images (which is what SPIDER operation 
   <a href="../../man/apc.html">'AP C'</a> 
   does). As an example here, I'm using correspondence analysis for 
   the dimension-reduction. A similar method is principal-component 
   analysis (PCA); to run PCA, one needs to change an option under SPIDER 
   operation <a href="../../man/cas.html">'CA S'</a> 
   (here, in the batch file <a href="batch/ca-pca.msa">ca-pca.msa</a>). 
</p>

<p>
 For classification, there are three methods illustrated here: Diday's 
 method, Ward's method, and K-means. The individual classification 
 operations are described in more depth in the 
 <a href="../classification/tutorial.html">classification tutorial</a>. 
</p>

<hr />

<p><b><font size="4">Getting started</font></b></p>

<ul>
    <li>Download and unpackage the 
    <a href="tar_archive/latest_msa_proc.tar">tarball containing the batch files</a> 
    <BR>The files will be written to the current directory, so create a new one, if so desired. </li>
</ul>

<hr>

<p><b><font size="4">Procedure</font></b></p>

<ol>
    <li><b>Low-pass filtration</b> 
    <ul>
        <li>BATCH FILE: <a href="batch/filtershrink.msa">filtershrink.msa</a></li> 
        <li>INPUT PARAMETERS: filter radii, decimation factor </li>
        <li>INPUTS: selection file, unfiltered particles </li>
        If you don't have a selection file, run 
        <a href="batch/mkfilenums.py">mkfilenums.py</a> (W.T.B. &amp; T.R.S.), 
        substituting the appropriate filenames: <br />

        <code><b>mkfilenums.py &nbsp; listparticles.dat &nbsp; win/ser*.dat</code></b></li>

        <li>OUTPUTS: filtered particles</li>
    </ul>
    <p />

    <li><b>Reference-free alignment</b>. --  choose one of these two options:
    <ol type="a">
        <li>Using <a href="../../man/apsr.html">'AP SR'</a> 
        <ul>
            <li>BATCH FILE: <a href="batch/apsr4class.msa">apsr4class.msa</a></li>
            <li>INPUT PARAMETER: object diameter (pixels, after decimation)</li>
            <li>INPUTS: unaligned particles, selection file </li>
            <li>OUTPUTS: aligned particles, averages
 
            <p>There may to be a memory limit in 
            <a href="../../man/apsr.html">'AP SR'</a>.
            If you get a core dump, truncate the selection file and try again.</p></li>
        </ul>

        <li>Using pairwise alignment
        <ul>
            <li>BATCH FILE: <a href="batch/pairwise.msa">pairwise.msa</a></li> 
            <li>INPUT PARAMETER: object diameter (in pixels, after decimation)</li>
            <li>INPUTS: unaligned particles, selection file </li>
            <li>OUTPUTS: aligned particles, averages 
 
            <p>Conceptually, this alignment first aligns pairs of images and averages them.
                 Then, it aligns pairs of averages of those pairs and averages them, and so forth.  
                 This type of alignment appears to be less random than does 
                 <a href="../../man/apsr.html">'AP SR'</a>, 
                 which chooses seed images as alignment references.</p>
            <P><B>Reference</B>: Marco S, Chagoyen M, de la Fraga LG, Carazo JM, Carrascosa JL (1996)
                Ultramicroscopy <B>66</B>: 5-10.</p></li>
        </ul>
    </ol>

    <li><b>Dimension-reduction</b> 
    <ul>
    <li>1. <I>(optional)</I> Create a custom mask for your particle.
        The alternative is that a circular mask will be used below.</li>
        <ul>
            <li>BATCH FILE: <A HREF="batch/custommask.msa">custommask.msa</A></li>
            <li>PARAMETERS:</li>
                <ul>
                    <li>Fourier filter radius for input image</li>
                    <li>first threshold, in units of standard deviations <BR>
                        That is, the threshold will be set to the average intensity 
                        plus some number times the standard deviation.</li>
                    <li>Fourier filter radius for the thresholded image <BR>
                        The first thresholded image is often too jagged, 
                        so this filtration serves to smooth it.</li>
                    <li>second threshold, for the filtered mask, between 0 and 1 <BR>
                        The lower the number, the more generous the mask will be.</li>
                </ul>
            <li>INPUT: average image, such as <B>pairwise/rfreeavg001</B></li>
            <li>OUTPUT: <B>stkmask</B>, whose slices are as follows:</li>
                <ol>
                    <li>filtered image</li>
                    <li>thresholded image</li>
                    <li>filtered mask</li>
                    <li>final mask</li>
                    <li>mask-multipled image</li>
                    <li>inverted mask</li>
                    <li>inverted mask-multiplied image</li>
                </ol>
            <BR>You may need to fiddle with the parameters to get a nice mask.
        </ul>

            <CENTER><P><TABLE BORDER="1">
                <TR><TD><CENTER><P ALIGN="CENTER">
                <IMG SRC="images/custom.gif"><BR>
                slices of the custom-made mask stack file
                </P></CENTER></TD></TR>
            </TABLE></P></CENTER>

    <li>2. Run correspondence analysis or principal component analysis</li>
        <ul>
            <li>BATCH FILE: <A HREF="batch/ca-pca.msa">ca-pca.msa</a></li>
            <li>uses Python script <A HREF="batch/eigendoc.py">eigendoc.py</A> (J.S.L. &amp; T.R.S.) </li>
            <li>INPUT PARAMETER: number of eigenfactors to calculate (more than 99 will require some user modification)</li>
            <li>INPUT: aligned particles </li>
            <li>OUTPUTS: </li>
              <UL type="circle">
                <li><A HREF="images/factormap.gif">factormaps</A> 
                  -- 2D plot of a pair of factors (e.g., 1 vs. 2) for each image </li>
                <li><A HREF="images/histogram.gif">eigenvalue histogram</A> 
                  -- shows how much variation is accounted for for each factor </li>
                <li><A HREF="images/eigenimages.jpg">eigenimages</A> 
                   <BR>&nbsp; Qualitatively, eigenimages are the systematic variations of the images.
                   <BR>&nbsp; Think of expressing each image as the average plus some linear combination of the eigenimages. </li>
                <li><A HREF="images/reconstituted.jpg">reconstituted images</A> 
                  -- these are characteristic images with extreme values for each factor</li>
              </UL>
            
            <p>To switch to PCA (or iterative PCA), change the register <I>x28</I> in
            <A HREF="batch/ca-pca.msa">ca-pca.msa</a> to 2 (PCA) or 3 (iterative PCA). </p>
            
            <p>After running, examine the eigenimages and decide which ones to use. 
            Typically all but the first few are noisy. If not, increase the number 
            of eigenfactors to calculate, and re-run this batch file. </p>
        </ul>

        <CENTER><P><TABLE BORDER="1">
            <caption align="bottom">
                The worm hemoglobin images are artificial and can be described with only a few factors. <BR>
                The ribosome images are real, and require more factors to describe the data. <BR>
                Note the vertical axis on the two histograms, representing the percent variation accounted for.
                </caption>
            <TR>
                    <TD><CENTER><P ALIGN="CENTER">
                        </P></CENTER></TD>
                    <TD><CENTER><P ALIGN="CENTER">
                        factor 1 vs. 2<BR>
                        <I>(click to enlarge)</I>
                        </P></CENTER></TD>
                    <TD><CENTER><P ALIGN="CENTER">
                        eigenvalue histogram<BR>
                        <I>(click to enlarge)</I>
                        </P></CENTER></TD>
                    <TD><CENTER><P ALIGN="CENTER">
                        eigenimages<BR>
                        <I>(click to enlarge)</I>
                        </P></CENTER></TD>
                    <TD><CENTER><P ALIGN="CENTER">
                        reconstituted images<BR>
                        <I>(click to enlarge)</I>
                        </P></CENTER></TD>
                </TR>
            <TR>
                    <TD><CENTER><P ALIGN="CENTER">
                        worm <BR>
                        hemoglobin <BR>
                        (artificial)
                        </P></CENTER></TD>
                    <TD><CENTER><P ALIGN="CENTER">
                        <A HREF="images/hb-factormap.gif">
                        <IMG SRC="images/hb-factormap-small.gif" border="2"></A>
                        </P></CENTER></TD>
                    <TD><CENTER><P ALIGN="CENTER">
                        <A HREF="images/hb-histogram.gif">
                        <IMG SRC="images/hb-histogram-small.gif" border="2"></A>
                        </P></CENTER></TD>
                    <TD><CENTER><P ALIGN="CENTER">
                        <A HREF="images/eigenimages.jpg"">
                        <IMG SRC="images/eigenimages.jpg" border="2" width="119" height="128"></A>
                        </P></CENTER></TD>
                    <TD><CENTER><P ALIGN="CENTER">
                        <A HREF="images/reconstituted.jpg"">
                        <IMG SRC="images/reconstituted.jpg" border="2" width="167" height="128"></A>
                        </P></CENTER></TD>
                </TR>
            <TR>
                    <TD><CENTER><P ALIGN="CENTER">
                        ribosome <BR>
                        (real)
                        </P></CENTER></TD>
                    <TD><CENTER><P ALIGN="CENTER">
                        <A HREF="images/factormap.gif">
                        <IMG SRC="images/factormap-small.gif" border="2"></A>
                        </P></CENTER></TD>
                    <TD><CENTER><P ALIGN="CENTER">
                        <A HREF="images/histogram.gif">
                        <IMG SRC="images/histogram-sm32.gif" border="2"></A>
                        </P></CENTER></TD>
                </TR>
        </TABLE></P></CENTER>
    </ul>

    <li><b>Classification </b>-- choose one of three options: 

    <ol type="a">
        <li>Diday's method, using 
           <a href="../../man/clcla.html">'CL CLA'</a> -- I hear that this method 
           works exceedingly well. In 
           practice though, I find that I have limited control over the number of 
           classes, which may or may not be a problem depending on the 
           application. Also, I sometimes get errors with large data sets with 
           this method. 
        <ul>
            <li>BATCH FILE: <a href="batch/cluster.msa">cluster.msa</a> 
            <ul>
                <li>INPUT PARAMETER: number of eigenfactors to use </li>
                <li>OUTPUT: dendrograms 
                    (<a href="images/dendrogram.gif">PostScript</a>
                    and SPIDER formats)
                <p>After running, decide how many classes to include. using 
                   <a href="../../../../web/docs/web.html">WEB</a>/
                   <a href="../../../../web/docs/jweb.html">JWEB</a> 
                (<i>Commands -&gt; Dendrogram</i>) and clicking on 
                 <i>Show averaged images</i>.</p></li> 
            </ul>

            <center><p><table border="1">
                <tr>
                    <td><center><p align="center">
                        <a href="images/dendrogram.gif">
                        <img src="images/dendrogram-sm4.gif"> <br />
                        dendrogram<br />

                        PostScript format</a><br />
                        <i>(click to enlarge)</i>
                    </p></center></td>
                </tr>
            </table></p></center>

            <li>BATCH FILE: <a href="batch/classavg.msa">classavg.msa</a> 
                <ul>
                    <li>INPUT PARAMETER: desired number of classes 
                    <li>OUTPUT: class averages 
                </ul>
        </ul>
        <p />

        <li>Ward's method, using 
        <a href="../../man/clhc.html">'CL HC'</a>  -- 
        The advantage is that, unlike Diday's method above, the 
        dendrogram branches to any desired number of classes, down in size to 
        individual particles. The disadvantage is that the dendrogram is unreadable if 
        there are so many branches. You can truncate the dendrogram in WEB/JWEB 
        as described below. 
            <ul>
                <li>BATCH FILE: <a href="batch/hierarchical.msa">hierarchical.msa</a> 
                <ul>
                    <li>INPUT PARAMETER: number of eigenfactors to use</li>
                    <li>OUTPUT: dendrograms (<a href="images/hcps.gif">PostScript</a> and 
                        SPIDER formats)
 
                    <p>After running, decide how many classes to use. 
                       The PostScript file may be highly branched, and nodes may be 
                        <a href="images/hcps.gif">unreadable</a>. 

                    <center><p><table border="1">
                            <tr>
                                <td><center><p align="center">
                                    <a href="images/hcps.gif">
                                    <img src="images/hcps-small.gif"> <br />
                                    Untruncated dendrogram</a>        <br />
                                    <i>(click to enlarge bottom row)</i>
                                </p></center></td>
                            </tr>
                    </table></p></center>

                    The SPIDER-format dendrogram document can be viewed 
                        with WEB/JWEB and 
                        truncated. In <a href="../../../../web/docs/web.html">WEB</a>, 
                        go to <i>Commands -&gt; Dendrogram </i> 
                        (<a href="images/hcweb5.gif"><i>example</i></a>).
 
                        In <a href="../../../../web/docs/jweb.html">JWEB</a>,
                        go to <i>File -&gt; Open SPIDER Document File</i>. 


        <center><p><table border="1">
                <tr>
                    <td><center><p align="center">
                        <a href="images/hcweb5.gif">
                        <img src="images/hcweb-small.gif"><br />
                        Dendrogram in X-Window 
                        <a href="../../../../web/docs/web.html">WEB</a></a><br />
                        <i>(click to enlarge)</i>
                    </p></center></td>
                </tr>
        </table></p></center></p>
                </ul>

                <li>BATCH FILE: <a href="batch/classavg.msa">classavg.msa</a> 
                    <ul>
                        <li>INPUT PARAMETER: desired number of classes 
                        <li>OUTPUT: class averages 
                    </ul>
                 </ul>
            </ul>
        <p />

        <li>K-means classification, using 
            <a href="../../man/clkm.html">'CL KM'</a>   -- The primary input is the number of classes 
        to divide the particles into. 
        <ul>
            <li>BATCH FILE: <a href="batch/kmeans.msa">kmeans.msa</a> </li>
            <li>INPUT PARAMETERS: number of eigenfactors, number of classes </li>
            <li>OUTPUT: class averages 

            <p>It can be informative to look at the individual particles from a class.  
                You can use 
                <a href="../../../../web/docs/web.html">WEB</a>/
                <a href="../../../../web/docs/jweb.html">JWEB</a>, or 
                <a href="batch/montagefromdoc.py">montagefromdoc.py</a>.  
                <br />
                Usage: <br />
                <code><B>./montagefromdoc.py &nbsp; KM/docclass001.dat</B></code><br />
                If you have requested too many classes, there will be 
                 similar-looking class averages.  
                If you have requested too few, there will be dissimilar 
                particles within a class.  </p></li>
        </ul>
    </ol>
</ol>

<HR>

<p><b><font size="4">Miscellaneous tools:</font></b></p>

<ul>
    <li>There is a Python utility, 
        <a href="../../../../spire/doc/guitools/classavg.html">classavg.py</a>, 
        that upon clicking on a class average displays the constituent 
        individual particles.</li>
    <p />

    <li><a name="tree">Binary tree</a> -- It is often not clear where to truncate the dendrogram. 
        In X-Window <a href="../../../../web/docs/web.html">WEB</a>, 
          one only sees the terminal nodes in the dendrogram averaged.  
        (In <a href="../../../../web/docs/jweb.html">JWEB</a>, 
         averaged images in not implemented at the time of this writing, 
        although Bill Rice says that if the prefix is two characters long, it works.)  
        <ul>
            <li>BATCH FILE:  <a href="batch/binarytree.msa">binarytree.msa</a>
                <ul>
                    <li>SUBROUTINES: <a href="batch/averagenode.msa">averagenode.msa</a>, 
                        <a href="batch/update_lut.msa">update_lut.msa</a> </li>

                    <li>INPUT PARAMETER: tree depth (number of averages will 
                           be (2**depth - 1)) </li>

                    <li>INPUTS: dendrogram (from 
                        <a href="batch/hierarchical.msa">hierarchical.msa</a>), 
                        images </li>

                    <li>OUTPUTS: averages (unlabeled and labeled) </li>
                </ul>

            <li>Visualize the output using <a href="batch/binarytree.py">tree.py</a> 
                (previously called <I>tree.py</I>, requires 
                <a href="../../python/spipylib/code/Spiderutils.html">Spiderutils.py</a>, 
                part of the <a href="../../../../spire/doc/index.html">SPIRE</a> 
                installation). Syntax: <br />
                <i>binarytree.py &nbsp;&nbsp; labeled001.dat &nbsp;&nbsp; 4 &nbsp;&nbsp; 2 &nbsp;&nbsp; 1024</i> <br />
                where:
                <ul>
                    <li><b>labeled001.dat</b> is an example filename 
                       (without a wild card)</li>
                    <li><i>4 (optional)</i> is the tree depth, i.e., the number of rows (default is 6) </li>
                    <li><i>2 (optional)</i> is the margin width (default is 2) </li>
                    <li><i>1024 (optional)</i> is the canvas width</li>
                </ul>
            <li>If <a href="../../../../spire/doc/index.html">SPIRE</a> 
                is not installed, try <a href="batch/spidertree.msa">spidertree.msa</a>. 
                The output is a SPIDER-format image. However, the file size
                may be very large. 
                <ul> 
                    <li>INPUT PARAMETERS: tree depth (number of averages 
                        will be (2**depth - 1))</li>

                    <li>INPUTS: averages from 
                        <a href="batch/binarytree.msa">binarytree.msa</a></li>

                    <li>OUTPUTS: SPIDER-format tree image</li>
                </ul> 

            <center><p><table border="1">
                <tr>
                        <td><center><p align="center">
                            <a href="images/tree3.jpg">
                            <img src="images/tree3-small.jpg"> <br />
                            binarytree.py, <i>depth=4</i></a> <br />
                            <i>(click to enlarge)</i>

                        <td><center><p align="center">
                            <a href="images/tree4.jpg">
                            <img src="images/tree4-small.jpg">  <br />
                            tree.msa, <i>depth=4</i></a> <br />
                            <i>(click to enlarge)</i>
                            </p></center></td>
                </tr>
            </table></p></center>
        </ul>
</ul>

<hr />

<P>
<B><FONT SIZE="4"><a name="mods">Recent modifications:</a></FONT></B></P>
<UL>
<!--    <LI>2014-date -- </LI> -->
   <LI>2014-02-04 -- changed project extention to '.msa' </LI>
   <LI>2014-02-04 -- added SPIRE configuration file (adapted from Munich Workshop) </LI>
   <LI>2014-01-20 -- added more illustrations for phantom worm hemoglobin data </LI>
   <LI>2014-01-20 -- ca-pca.msa -- made the number of standard deviations in the factor maps user defined
      <BR>&nbsp; SPIDER sometimes crashes when too small a value is used 
      (where too many points pile up on the edge of the plot)</LI>
   <LI>2009-06-12 -- added illustration for custom mask</LI>
</UL>

<hr />

<p>
<small>
  Source:       techs/MSA/index.html &nbsp;&nbsp;&nbsp; 
  Page updated: 2014/02/05    &nbsp;&nbsp;&nbsp; 
  Tanvir Shaikh
</small>
</p>

</body>
</html>
@


1.12
log
@changed '.spi' extension to '.msa'
added SPIRE configuration file
added additonal error-checking (downsampling, alignment radius)
@
text
@d60 1
a60 1
    <a href="tar_archive/msa20140204.tar">tarball containing the batch files</a> 
d464 1
a464 1
   <LI>2014-02-04 -- added SPIDER configuration file (adapted from Munich Workshop) </LI>
d477 1
a477 1
  Page updated: 2014/02/04    &nbsp;&nbsp;&nbsp; 
@


1.11
log
@updated modification date
@
text
@d4 1
a4 1
    <title>MDA</title>
d44 1
a44 1
   (here, in the batch file <a href="batch/ca-pca.spi">ca-pca.spi</a>). 
d60 1
a60 1
    <a href="tar_archive/msa20140124.tar">tarball containing the batch files</a> 
d71 1
a71 1
        <li>BATCH FILE: <a href="batch/filtershrink.spi">filtershrink.spi</a></li> 
d88 1
a88 1
            <li>BATCH FILE: <a href="batch/apsr4class.spi">apsr4class.spi</a></li>
d100 1
a100 1
            <li>BATCH FILE: <a href="batch/pairwise.spi">pairwise.spi</a></li> 
d120 1
a120 1
            <li>BATCH FILE: <A HREF="batch/custommask.spi">custommask.spi</A></li>
d156 2
a157 5
            <li>BATCH FILE: <A HREF="batch/ca-pca.spi">ca-pca.spi</a></li>
            <li>uses Python script 
            <A HREF="batch/eigendoc.py">eigendoc.py</A>
                (J.S.L.) and Gnuplot script <A HREF="batch/ploteigen.gnu">ploteigen.gnu</A>
                (J.S.L. &amp; T.R.S.) </li>
d174 1
a174 1
            <A HREF="batch/ca-pca.spi">ca-pca.spi</a> to 2 (PCA) or 3 (iterative PCA). </p>
d258 1
a258 1
            <li>BATCH FILE: <a href="batch/cluster.spi">cluster.spi</a> 
d284 1
a284 1
            <li>BATCH FILE: <a href="batch/classavg.spi">classavg.spi</a> 
d300 1
a300 1
                <li>BATCH FILE: <a href="batch/hierarchical.spi">hierarchical.spi</a> 
d344 1
a344 1
                <li>BATCH FILE: <a href="batch/classavg.spi">classavg.spi</a> 
d357 1
a357 1
            <li>BATCH FILE: <a href="batch/kmeans.spi">kmeans.spi</a> </li>
d395 1
a395 1
            <li>BATCH FILE:  <a href="batch/binarytree.spi">binarytree.spi</a>
d397 2
a398 2
                    <li>SUBROUTINES: <a href="batch/averagenode.spi">averagenode.spi</a>, 
                        <a href="batch/update_lut.spi">update_lut.spi</a> </li>
d404 1
a404 1
                        <a href="batch/hierarchical.spi">hierarchical.spi</a>), 
d424 2
a425 2
            <li>If <a href="../../python/spipylib/code/Spiderutils.html">Spiderutils.py</a> 
                is not installed, try <a href="batch/tree.spi">tree.spi</a>. 
d433 1
a433 1
                        <a href="batch/binarytree.spi">binarytree.spi</a></li>
d449 1
a449 1
                            tree.spi, <i>depth=4</i></a> <br />
d463 2
d466 1
a466 1
   <LI>2014-01-20 -- ca-pca.spi -- made the number of standard deviations in the factor maps user defined
d477 1
a477 1
  Page updated: 2014/01/24    &nbsp;&nbsp;&nbsp; 
@


1.10
log
@updated tarball
@
text
@d478 1
a478 1
  Page updated: 2013/01/20    &nbsp;&nbsp;&nbsp; 
@


1.9
log
@Added images of eigenimages and reconstituted images, description of ca-pca output
@
text
@d60 1
a60 1
    <a href="tar_archive/msa20130120.tar">tarball containing the batch files</a> 
@


1.8
log
@bad a tags fixed
@
text
@d6 1
a7 1
<body>
d18 1
a18 1
    <li>Low-pass filtration         </li>
d60 2
a61 2
    <a href="tar_archive/msa20121214.tar">tarball containing the batch files</a> 
    <br />The files will be written to the current directory, so create a new one, if so desired. </li>
d110 2
a111 2
            <p><b>Reference</b>: Marco S, Chagoyen M, de la Fraga LG, Carazo JM, Carrascosa JL (1996)
                Ultramicroscopy <b>66</b>: 5-10.</p></li>
d120 1
a120 1
            <li>BATCH FILE: <a href="batch/custommask.spi">custommask.spi</a></li>
d124 1
a124 1
                    <li>first threshold, in units of standard deviations <br />
d127 1
a127 1
                    <li>Fourier filter radius for the thresholded image <br />
d130 1
a130 1
                    <li>second threshold, for the filtered mask, between 0 and 1 <br />
d133 2
a134 2
            <li>INPUT: average image, such as <b>pairwise/rfreeavg001</b></li>
            <li>OUTPUT: <b>stkmask</b>, whose slices are as follows:</li>
d136 6
a141 6
                    <li>filtered image                </li>
                    <li>thresholded image             </li>
                    <li>filtered mask                 </li>
                    <li>final mask                    </li>
                    <li>mask-multipled image          </li>
                    <li>inverted mask                 </li>
d144 1
a144 1
            <br />You may need to fiddle with the parameters to get a nice mask.
d147 3
a149 3
            <center><p><table border="1">
                <tr><td><center><p align="center">
                <img src="images/custom.gif"> <br />
d151 2
a152 2
                </p></center></td></tr>
            </table></p></center>
d156 1
a156 1
            <li>BATCH FILE: <a href="batch/ca-pca.spi">ca-pca.spi</a></li>
d158 2
a159 2
            <a href="batch/eigendoc.py">eigendoc.py</a>
                (J.S.L.) and Gnuplot script <a href="batch/ploteigen.gnu">ploteigen.gnu</a>
d163 12
a174 3
            <li>OUTPUTS: <a href="images/histogram.gif">eigenvalue histogram</a>, 
            eigenimages, <a href="images/factormap.gif">factormaps</a>, 
            reconstituted images <br />
d177 1
a177 1
            <a href="batch/ca-pca.spi">ca-pca.spi</a> to 2 (PCA) or 3 (iterative PCA). </p>
d181 1
a181 1
            of eigenfactors to calculate, and re-run this batch file. </p></li>
d184 64
a247 16
        <center><p><table border="1">
            <tr>
                    <td><center><p align="center">
                        <a href="images/histogram.gif">
                        <IMG SRC="images/histogram-sm32.gif"><br />
                        eigenvalue histogram</a><br />
                        <i>(click to enlarge)</i>
                    </p></center></td>
                    <td><center><p align="center">
                        <a href="images/factormap.gif">
                        <IMG SRC="images/factormap-small.gif"><br />
                        factormap</a><br />
                        <i>(click to enlarge)</i>
                    </p></center></td>
                </tr>
        </table></p></center>
d413 2
a414 1
            <li>Visualize the output using <a href="batch/tree.py">tree.py</a>. (Requires 
d417 2
a418 2
                installation.)  Syntax: <br />
                <i>tree.py &nbsp;&nbsp; labeled001.dat &nbsp;&nbsp; 4 &nbsp;&nbsp; 2 &nbsp;&nbsp; 1024</i> <br />
d423 1
a423 3

                    <li><i>4 (optional)</i> is the tree depth (default is 6) </li>

a424 1

a426 1

d446 1
a446 1
                            tree.py, <i>depth=4</i></a> <br />
d462 13
d478 1
a478 1
  Page updated: 2012/12/14    &nbsp;&nbsp;&nbsp; 
@


1.7
log
@updated tarball link
@
text
@d6 1
a8 1

d18 1
a18 1
    <li>Low-pass filtration </li>
d61 1
a61 1
    <BR>The files will be written to the current directory, so create a new one, if so desired. </li>
d110 2
a111 2
            <P><B>Reference</B>: Marco S, Chagoyen M, de la Fraga LG, Carazo JM, Carrascosa JL (1996)
                Ultramicroscopy <B>66</B>: 5-10.</p></li>
d120 1
a120 1
            <li>BATCH FILE: <A HREF="batch/custommask.spi">custommask.spi</A></li>
d124 1
a124 1
                    <li>first threshold, in units of standard deviations <BR>
d127 1
a127 1
                    <li>Fourier filter radius for the thresholded image <BR>
d130 1
a130 1
                    <li>second threshold, for the filtered mask, between 0 and 1 <BR>
d133 2
a134 2
            <li>INPUT: average image, such as <B>pairwise/rfreeavg001</B></li>
            <li>OUTPUT: <B>stkmask</B>, whose slices are as follows:</li>
d136 6
a141 6
                    <li>filtered image</li>
                    <li>thresholded image</li>
                    <li>filtered mask</li>
                    <li>final mask</li>
                    <li>mask-multipled image</li>
                    <li>inverted mask</li>
d144 1
a144 1
            <BR>You may need to fiddle with the parameters to get a nice mask.
d147 3
a149 3
            <CENTER><P><TABLE BORDER="1">
                <TR><TD><CENTER><P ALIGN="CENTER">
                <IMG SRC="images/custom.gif"><BR>
d151 2
a152 2
                </P></CENTER></TD></TR>
            </TABLE></P></CENTER>
d156 1
a156 1
            <li>BATCH FILE: <A HREF="batch/ca-pca.spi">ca-pca.spi</a></li>
d158 2
a159 2
            <A HREF="batch/eigendoc.py">eigendoc.py</A>
                (J.S.L.) and Gnuplot script <A HREF="batch/ploteigen.gnu">ploteigen.gnu</A>
d163 3
a165 3
            <li>OUTPUTS: <A HREF="images/histogram.gif">eigenvalue histogram</A>, 
            eigenimages, <A HREF="images/factormap.gif">factormaps</A>, 
            reconstituted images <br>
d168 1
a168 1
            <A HREF="batch/ca-pca.spi">ca-pca.spi</a> to 2 (PCA) or 3 (iterative PCA). </p>
d175 16
a190 16
        <CENTER><P><TABLE BORDER="1">
            <TR>
                    <TD><CENTER><P ALIGN="CENTER">
                        <A HREF="images/histogram.gif">
                        <IMG SRC="images/histogram-sm32.gif"><BR>
                        eigenvalue histogram</A><BR>
                        <I>(click to enlarge)</I>
                    </P></CENTER></TD>
                    <TD><CENTER><P ALIGN="CENTER">
                        <A HREF="images/factormap.gif">
                        <IMG SRC="images/factormap-small.gif"><BR>
                        factormap</A><BR>
                        <I>(click to enlarge)</I>
                    </P></CENTER></TD>
                </TR>
        </TABLE></P></CENTER>
d372 1
@


1.6
log
@updated link to tarball
@
text
@d60 1
a60 1
    <a href="tar_archive/msa20120413.tar">tarball containing the batch files</a> 
d334 1
a334 1
    <li>Binary tree -- It is often not clear where to truncate the dendrogram. 
d410 1
a410 1
  Page updated: 4/13/12      &nbsp;&nbsp;&nbsp; 
@


1.5
log
@formatting changes, added Carrascosa citation
@
text
@d60 1
a60 1
    <a href="tar_archive/msa20120126.tar">tarball containing the batch files</a> 
@


1.4
log
@added optional step for custom mask, added link to tarball
@
text
@a71 1

a72 1

d78 1
a78 1
        <i>mkfilenums.py &nbsp;&nbsp;&nbsp; listparticles.dat &nbsp;&nbsp;&nbsp; win/ser*.dat</i></li>
d85 1
a85 1
    <ol type="A">
a88 1
 
a89 1

d91 1
a91 2

            <li>OUTPUTS: aligned particles, averages</li>
d93 3
a95 4
            <li>There may to be a memory limit in 
            <a href="../../man/apsr.html">'AP SR'</a>.</li>
  
            If you get a core dump, truncate the selection file and try again.
d101 1
a101 3

            <li>INPUT PARAMETER: object diameter (pixels, after decimation)</li>

d103 1
a103 2

            <li>OUTPUTS: aligned particles, averages </li>
d105 2
a106 2
            <li>Conceptually, this alignment first aligns pairs of images and averages them.
                 Then, it aligns pairs of those pairs and averages them, and so forth.  
d109 3
a111 1
                 which chooses seed images as alignment references.</li>
d115 1
a115 2
    <li>
    <b>Dimension-reduction</b> 
d144 1
a144 1
            <li>You may need to fiddle with the parameters to get a nice mask.</li>
d150 1
a150 1
                custom-made mask
d156 1
a156 1
            <li>BATCH FILE: <A HREF="batch/ca-pca.spi">ca-pca.spi</li>
d165 6
a170 5
            reconstituted images </li>
            <li>To switch to PCA (or iterative PCA), change the option in ca-pca.spi 
            under the command CA S from C to P (or I, respectively), and remove the 
            line referring to the additive constant. </li>
            <li>After running, examine the eigenimages and decide which ones to use. 
d172 1
a172 1
            of eigenfactors to calculate, and re-run this batch file. </li>
d195 1
a195 1
    <ol type="A">
a202 1
        
a206 1

d209 2
a210 3
                    and SPIDER formats)</li> 

                <li>After running, decide how many classes to include. using 
d214 1
a214 1
                 <i>Show averaged images</i>.</li> 
d218 1
a218 1
            	<tr>
d240 5
a244 5
        The pro is that, unlike Diday's method above, the 
        dendrogram branches to any arbitrary number of classes, down in size to 
        individual particles. The con is that the dendrogram is unreadable if 
        there are so many branches. You can truncate the dendrogram in 
        WEB/JWEB as described below. 
a248 1
 
d252 1
a252 1
                    <li>After running, decide how many classes to use. 
d257 1
a257 1
                    	<tr>
d267 1
a267 1
                    <li>The SPIDER-format dendrogram document can be viewed 
d278 1
a278 1
        	<tr>
d287 2
a288 1
        </table></p></center>
a303 1

d305 1
d307 1
a307 3
            <li>OUTPUT: class averages </li>

            <li>It can be informative to look at the individual particles from a class.  
d314 1
a314 1
                <i>./montagefromdoc.py &nbsp;&nbsp; KM/docclass001.dat</i><br />
d318 1
a318 1
                particles within a class.  
d387 1
a387 1
            	<tr>
d410 1
a410 1
  Page updated: 1/31/12      &nbsp;&nbsp;&nbsp; 
@


1.3
log
@AP CM  --> AP C
@
text
@d59 3
a61 2
    <li>All files are located under: <i> <a href="../MSA">techs/MSA</a></i> 
        (Modified June 2009).</li> 
d87 1
a87 1
    <ol>
d112 1
a112 1
            <li>OUTPUTS: aligned particles, averages/li>
a120 1
    <p />
d125 29
a153 9
        <li>BATCH FILE: <a href="batch/ca-pca.spi">ca-pca.spi</a> <br />

        Uses Python script 
        <a href="../classification/tut_txt/eigendoc.py">eigendoc.py</a>
         (J.S.L.) and Gnuplot script <a href="batch/ploteigen.gnu">ploteigen.gnu</a>
         (J.S.L. &amp; T.R.S.)</li>
 
        <li>INPUT PARAMETER: number of eigenfactors to calculate 
             (more than 99 will require some user modification)</li>
d155 6
a160 1
        <li>INPUT: aligned particles </li>
d162 14
a175 8
        <li>OUTPUTS: <a href="images/histogram.gif">eigenvalue histogram</a>, 
                     eigenimages, 
                     <a href="images/factormap.gif">factormaps</a>, &amp; 
                     reconstituted images </li>

        <li>To switch to PCA (or iterative PCA), change the option in 
            <a href="batch/ca-pca.spi">ca-pca.spi</a> 
            under the operation 'CA S' from 'C' to 'P' (or 'I', respectively), and remove the 
d177 1
a177 2

        <li>After running, examine the eigenimages and decide which ones to use. 
d180 1
d182 16
a197 17
        <center><p><table border="1">
        	<tr>
                    <td><center><p align="center">
                        <a href="images/histogram.gif">
                        <img src="images/histogram-sm32.gif"><br />
                        eigenvalue histogram</a>             <br />
                        <i>(click to enlarge)</i>
                    </p></center></td>

        	    <td><center><p align="center">
                        <a href="images/factormap.gif">
                        <img src="images/factormap-small.gif"><br />
                        factormap</a><br />
                        <i>(click to enlarge)</i>
                    </p></center></td>
                </tr>
        </table></p></center>
a198 1
    <p />
d202 2
a203 2
    <ul>
        <li>1. Diday's method, using 
d248 1
a248 1
        <li>2. Ward's method, using 
d309 1
a309 1
        <li>3. K-means classification, using 
d332 2
a333 2
    </ul>
</OL>
d421 2
a422 2
  Source:       techs/MSA/index.htm &nbsp;&nbsp;&nbsp; 
  Page updated: 8/03/09      &nbsp;&nbsp;&nbsp; 
@


1.2
log
@cosmetic, doctype compliance, untarred stuff, links local, etc.
@
text
@d18 2
a19 4
    <li>Low-pass filtration</li>

    <li>Alignment in two dimensions</li>

d21 2
a22 3
        using only a few terms, i.e., eigenvectors</li> 

    <li>Classification</li> 
d26 2
a27 2
The low-pass filtration is optional, but if you plan to look at individual 
particles, this step will help.
d31 3
a33 3
For the classification below to be sensible, the images will need to 
have been aligned. The alignment step here is optional if the images 
have been aligned already. 
d37 8
a44 8
The dimension-reduction step is even optional, in theory. In principle, 
one could classify the raw images (which is what SPIDER command 
<a href="../../man/apcm.html">AP CM</a> 
does). As an example here, I'm using correspondence analysis for 
the dimension-reduction. A similar method is principal-component 
analysis (PCA); to run PCA, one needs to change an option under SPIDER 
command <a href="../../man/cas.html">CA S</a> 
(here, in the batch file <a href="batch/ca-pca.spi">ca-pca.spi</a>). 
d48 4
a51 4
For classification, there are three methods illustrated here: Diday's 
method, Ward's method, and K-means. The individual classification 
commands are described in more depth 
<a href="../classification/tutorial.html"> tutorial here</a>. 
d56 1
a56 1
<p><b><FONT size="4">Getting started</font></b></p>
d59 2
a60 1
    <li>All files are located under: <i> docs/techs/MSA</i> (Modified 2008 Nov 17).</li> 
d63 1
a63 1
<HR>
d67 2
a68 2
<OL>
    <li><b>low-pass filtration</b> 
d77 3
a79 2
        substituting the appropriate filenames:
        <pre>mkfilenums.py listparticles.dat win/ser*.dat</pre></li>
a81 1

d83 1
d85 1
a85 1
    <li><b>reference-free alignment</b> choose one of these two options:
d87 1
a87 1
        <li>Using <a href="../../man/apsr.html">AP SR</a> 
d97 2
a98 2
            <li>There appears to be a memory limit for 
            <a href="../../man/apsr.html">AP SR</a>.</li>
d102 1
d111 1
a111 1
            <li>OUTPUTS: aligned particles, averages</li>
d116 1
a116 1
                 <a href="../../man/apsr.html">AP SR</a>, 
d120 1
d123 1
a123 1
    <b>dimension-reduction</b> 
d125 1
a125 1
        <li>BATCH FILE: <a href="batch/ca-pca.spi">ca-pca.spi</a> </li>
d127 1
a127 1
        <li>uses Python script 
d139 1
a139 1
                     <a href="images/factormap.gif">factormaps</a>, 
d142 3
a144 2
        <li>To switch to PCA (or iterative PCA), change the option in ca-pca.spi 
            under the command CA S from C to P (or I, respectively), and remove the 
d169 1
d171 2
a172 1
    <li><b>classification </b>-- choose one of three options: 
d175 1
a175 1
           <a href="../../man/clcla.html"> CL CLA</a> -- I hear that this method 
d179 2
a180 2
           application. Also, I've been getting errors with large data sets with 
           this method. <br />
d217 1
d220 1
a220 1
        <a href="../../man/clhc.html"> CL HC</a>  -- 
d278 2
d281 1
a281 1
            <a href="../../man/clkm.html"> CL KM</a>   -- The primary input is the number of classes 
d296 2
a297 2
                Usage:
      <pre><font face="Courier New, monospace">./montagefromdoc.py KM/docclass001.dat</font></pre>
d315 1
d342 2
a343 3
                installation.)
                <br />Syntax:
                <pre>tree.py labeled001.dat 4 2 1024</pre>
d392 3
a394 3
Source:       techs/MSA/index.htm &nbsp;&nbsp;&nbsp; 
Page updated: 11/17/08      &nbsp;&nbsp;&nbsp; 
Tanvir Shaikh
@


1.1
log
@Initial revision
@
text
@d2 5
a6 10
<HTML>
<HEAD>
    <TITLE>MDA</TITLE>
</HEAD>
<BODY>

<CENTER><P ALIGN="CENTER">
<FONT SIZE="7">Multivariate data analysis</FONT><BR>
<FONT SIZE="4">Previously known as multivariate statistical analysis</FONT>
</P></CENTER>
d8 16
a23 1
<HR>
d25 2
a26 8
<P>There are essentially only four steps here:</P>
<OL>
    <LI>low-pass filtration
    <LI>alignment in two dimensions
    <LI>dimension-reduction -- expression of a <I>m</I>x<I>n</I> image 
    using only a few terms, i.e., eigenvectors 
    <LI>classification 
</OL>
d28 1
a28 1
<P>
d31 1
a31 1
</P>
d33 1
a33 1
<P>
d37 1
a37 1
</P>
d39 1
a39 1
<P>
d41 3
a43 3
one could classify the raw images (which is what SPIDER command <A
 HREF="http://www.wadsworth.org/spider_doc/spider/docs/man/apcm.html">AP 
CM</A> does). As an example here, I'm using correspondence analysis for 
d46 3
a48 3
command <A HREF="http://www.wadsworth.org/spider_doc/spider/docs/man/cas.html">CA S</A> 
(here, in the batch file <A HREF="batch/ca-pca.spi">ca-pca.spi</A>). 
</P>
d50 1
a50 1
<P>
d54 2
a55 3
<A HREF="http://www.wadsworth.org/spider_doc/spider/docs/techs/classification/tutorial.html">
tutorial here</A>. 
</P>
d57 1
a57 1
<HR>
d59 1
a59 1
<P><B><FONT SIZE="4">Getting started</FONT></B></P>
d61 3
a63 4
<UL>
    <LI>Download and unpackage the 
    <a href="tar_archive/msa20081117.tar">tarball containing the batch files</a> (Modified 2008 Nov 17). 
</UL>
d67 1
a67 1
<P><B><FONT SIZE="4">Procedure</FONT></B></P>
d70 7
a76 5
    <LI><B>low-pass filtration</B> 
    <UL>
        <LI>BATCH FILE: <A HREF="batch/filtershrink.spi">filtershrink.spi</A> 
        <LI>INPUT PARAMETERS: filter radii, decimation factor <BR>
        <LI>INPUTS: selection file, unfiltered particles  <BR>
d78 1
a78 1
        <A HREF="batch/mkfilenums.py">mkfilenums.py</A> (W.T.B. &amp; T.R.S.), 
d80 21
a100 14
        <PRE>mkfilenums.py listparticles.dat win/ser*.dat</PRE><BR>
        <LI>OUTPUTS: filtered particles
    </UL>

    <LI><B>reference-free alignment</B> choose one of these two options:
    <OL>
        <LI>Using <A HREF="http://www.wadsworth.org/spider_doc/spider/docs/man/apsr.html">AP SR</A> 
        <UL>
            <LI>BATCH FILE: <A HREF="batch/apsr4class.spi">apsr4class.spi</A> 
            <LI>INPUT PARAMETER: object diameter (pixels, after decimation)
            <LI>INPUTS: unaligned particles, selection file <BR>
            <LI>OUTPUTS: aligned particles, averages 
            <LI>There appears to be a memory limit for 
            <A HREF="http://www.wadsworth.org/spider_doc/spider/docs/man/apsr.html">AP SR</A>.  
d102 12
a113 8
        </UL>
        <LI>Using pairwise alignment
        <UL>
            <LI>BATCH FILE: <A HREF="batch/pairwise.spi">pairwise.spi</A> 
            <LI>INPUT PARAMETER: object diameter (pixels, after decimation)
            <LI>INPUTS: unaligned particles, selection file <BR>
            <LI>OUTPUTS: aligned particles, averages 
            <LI>Conceptually, this alignment first aligns pairs of images and averages them.
d116 101
a216 87
                 <A HREF="http://www.wadsworth.org/spider_doc/spider/docs/man/apsr.html">AP SR</A>, 
                 which chooses seed images as alignment references.
        </UL>
    </OL>

    <LI>
    <B>dimension-reduction</B> 
    <UL>
        <LI>BATCH FILE: <A HREF="batch/ca-pca.spi">ca-pca.spi</A> 
        <LI>uses Python script 
        <A HREF="http://www.wadsworth.org/spider_doc/spider/docs/techs/classification/WebText/eigendoc.py">eigendoc.py</A>
         (J.S.L.) and Gnuplot script <A HREF="batch/ploteigen.gnu">ploteigen.gnu</A>
         (J.S.L. &amp; T.R.S.) 
        <LI>INPUT PARAMETER: number of eigenfactors to calculate (more than 99 will require some user modification)
        <LI>INPUT: aligned particles 
        <LI>OUTPUTS: <A HREF="histogram.gif">eigenvalue histogram</A>, 
        eigenimages, <A HREF="factormap.gif">factormaps</A>, 
        reconstituted images 
        <LI>To switch to PCA (or iterative PCA), change the option in ca-pca.spi 
        under the command CA S from C to P (or I, respectively), and remove the 
        line referring to the additive constant. 
        <LI>After running, examine the eigenimages and decide which ones to use. 
        Typically all but the first few are noisy. If not, increase the number 
        of eigenfactors to calculate, and re-run this batch file. 

        <CENTER><P><TABLE BORDER="1">
        	<TR>
                    <TD><CENTER><P ALIGN="CENTER">
                        <A HREF="histogram.gif">
                        <IMG SRC="histogram-sm32.gif"><BR>
                        eigenvalue histogram</A><BR>
                        <I>(click to enlarge)</I>
                    </P></CENTER></TD>
        	    <TD><CENTER><P ALIGN="CENTER">
                        <A HREF="factormap.gif">
                        <IMG SRC="factormap-small.gif"><BR>
                        factormap</A><BR>
                        <I>(click to enlarge)</I>
                    </P></CENTER></TD>
                </TR>
        </TABLE></P></CENTER>
    </UL>

    <LI><B>classification </B>-- choose one of three options: 
    <UL>
        <LI>1. Diday's method, using 
        <A HREF="http://www.wadsworth.org/spider_doc/spider/docs/man/clcla.html">
        CL CLA</A> -- I hear that this method works exceedingly well. In 
        practice though, I find that I have limited control over the number of 
        classes, which may or may not be a problem depending on the 
        application. Also, I've been getting errors with large data sets with 
        this method. <BR>
        <B>(NOTE: At this time, CL CLA does not appear to work correctly.  
        Use <A HREF="batch/hierarchical.spi">hierarchical.spi</A> or 
        <A HREF="batch/kmeans.spi">kmeans.spi</A> for now.)</B>
        <UL>
            <LI>BATCH FILE: <A HREF="batch/cluster.spi">cluster.spi</A> 
            <UL>
                <LI>INPUT PARAMETER: number of eigenfactors to use 
                <LI>OUTPUT: dendrograms (<A HREF="dendrogram.gif">PostScript</A>
                 and SPIDER formats) 
                <LI>After running, decide how many classes to include. using WEB/JWEB 
                (<I>Commands -&gt; Dendrogram</I>) and clicking on <I>Show averaged images</I>. 
            </UL>

            <CENTER><P><TABLE BORDER="1">
            	<TR>
                    <TD><CENTER><P ALIGN="CENTER">
                        <A HREF="dendrogram.gif">
                        <IMG SRC="dendrogram-sm4.gif"><BR>
                        dendrogram<BR>
                        PostScript format</A><BR>
                        <I>(click to enlarge)</I>
                    </P></CENTER></TD>
                </TR>
            </TABLE></P></CENTER>

            <LI>BATCH FILE: <A HREF="batch/classavg.spi">classavg.spi</A> 
                <UL>
                    <LI>INPUT PARAMETER: desired number of classes 
                    <LI>OUTPUT: class averages 
                </UL>
        </UL>

        <LI>2. Ward's method, using 
        <A HREF="http://www.wadsworth.org/spider_doc/spider/docs/man/clhc.html">
        CL HC</A>  -- The pro is that, unlike Diday's method above, the 
d219 56
a274 50
        there are so many branches. You can truncate the dendrogram in WEB/JWEB 
        as described below. 
            <UL>
                <LI>BATCH FILE: <A HREF="batch/hierarchical.spi">hierarchical.spi</A> 
                <UL>
                    <LI>INPUT PARAMETER: number of eigenfactors to use 
                    <LI>OUTPUT: dendrograms (<A HREF="hcps.gif">PostScript</A> and 
                    SPIDER formats) 
                    <LI>After running, decide how many classes to use. The PostScript file may 
                    be highly branched, and nodes may be 
                    <A HREF="hcps.gif">unreadable</A>. 

                    <CENTER><P><TABLE BORDER="1">
                    	<TR>
                                <TD><CENTER><P ALIGN="CENTER">
                                    <A HREF="hcps.gif">
                                    <IMG SRC="hcps-small.gif"><BR>
                                    Untruncated dendrogram</A><BR>
                                    <I>(click to enlarge bottom row)</I>
                                </P></CENTER></TD>
                            </TR>
                    </TABLE></P></CENTER>

                    <LI>The SPIDER-format dendrogram document can be viewed with WEB/JWEB and 
                    truncated. In WEB, go to <I>Commands -&gt; Dendrogram</I> (<A
                    HREF="hcweb5.gif"><I>example</I></A>). In JWEB, go to <I>File 
                    -&gt; Open SPIDER Document File</I>. 


        <CENTER><P><TABLE BORDER="1">
        	<TR>
                    <TD><CENTER><P ALIGN="CENTER">
                        <A HREF="hcweb5.gif">
                        <IMG SRC="hcweb-small.gif"><BR>
                        Dendrogram in X-Window WEB</A><BR>
                        <I>(click to enlarge)</I>
                    </P></CENTER></TD>
                </TR>
        </TABLE></P></CENTER>

                <LI>BATCH FILE: <A HREF="batch/classavg.spi">classavg.spi</A> 
                    <UL>
                        <LI>INPUT PARAMETER: desired number of classes 
                        <LI>OUTPUT: class averages 
                    </UL>
                 </UL>
            </UL>
        <LI>3. K-means classification, using 
        <A HREF="http://www.wadsworth.org/spider_doc/spider/docs/man/clkm.html">
        CL KM</A>   -- The primary input is the number of classes 
d276 21
a296 12
        <UL>
            <LI>BATCH FILE: <A HREF="batch/kmeans.spi">kmeans.spi</A> 
            <LI>INPUT PARAMETERS: number of eigenfactors, number of classes 
            <LI>OUTPUT: class averages 
            <LI>It can be informative to look at the individual particles from a class.  
                You can use WEB/JWEB, or <A HREF="batch/montagefromdoc.py">montagefromdoc.py</a>.  
                <BR>Usage:
      <PRE><FONT FACE="Courier New, monospace">./montagefromdoc.py KM/docclass001.dat</FONT></PRE>
                If you have requested too many classes, there will be similar-looking class averages.  
                If you have requested too few, there will be dissimilar particles within a class.  
        </UL>
    </UL>
d301 1
a301 1
<P><B><FONT SIZE="4">Miscellaneous tools:</FONT></B></P>
d303 3
a305 3
<UL>
    <LI>There is a Python utility, 
        <A HREF="http://www.wadsworth.org/spider_doc/spider/docs/spire/guitools/classavg.html">classavg.py</A>, 
d307 1
a307 1
        individual particles.
d309 5
a313 3
    <LI>Binary tree -- It is often not clear where to truncate the dendrogram. 
        In X-Window WEB, one only sees the terminal nodes in the dendrogram averaged.  
        (In JWEB, averaged images in not implemented at the time of this writing, 
d315 22
a336 15
        <UL>
            <LI>BATCH FILE:  <A HREF="batch/binarytree.spi">binarytree.spi</A>
                <UL>
                    <LI>SUBROUTINES: <A HREF="batch/averagenode.spi">averagenode.spi</A>, 
                        <A HREF="batch/update_lut.spi">update_lut.spi</A>
                    <LI>INPUT PARAMETER: tree depth (number of averages will be (2**depth - 1))
                    <LI>INPUTS: dendrogram (from <A HREF="batch/hierarchical.spi">hierarchical.spi</A>),
                        images
                    <LI>OUTPUTS: averages (unlabeled and labeled)
                </UL>
            <LI>Visualize the output using <A HREF="batch/tree.py">tree.py</A>. (Requires 
                <A HREF="http://www.wadsworth.org/spider_doc/spider/docs/python/spipylib/code/Spiderutils.html">Spiderutils.py</A>, 
                part of the <A HREF="http://www.wadsworth.org/spider_doc/spider/docs/spire/install.html">SPIRE</A> installation.)
                <BR>Syntax:
                <PRE>tree.py labeled001.dat 4 2 1024</PRE>
d338 48
a385 36
                <UL>
                    <LI><B>labeled001.dat</B> is an example filename (without a wild card)
                    <LI><I>4 (optional)</I> is the tree depth (default is 6)
                    <LI><I>2 (optional)</I> is the margin width (default is 2)
                    <LI><I>1024 (optional)</I> is the canvas width
                </UL>
            <LI>If SPIRE/Spiderutils.py is not installed, try <A HREF="batch/tree.spi">tree.spi</A>. 
                The output is a SPIDER-format image. However, the file size may be very large. 
                <UL> 
                    <LI>INPUT PARAMETERS: tree depth (number of averages will be (2**depth - 1))
                    <LI>INPUTS: averages from <A HREF="batch/binarytree.spi">binarytree.spi</A>
                    <LI>OUTPUTS: SPIDER-format tree image
                </UL> 

            <CENTER><P><TABLE BORDER="1">
            	<TR>
                        <TD><CENTER><P ALIGN="CENTER">
                            <A HREF="tree3.jpg">
                            <IMG SRC="tree3-small.jpg"><BR>
                            tree.py, <I>depth=4</I></A><BR>
                            <I>(click to enlarge)</I>
                        <TD><CENTER><P ALIGN="CENTER">
                            <A HREF="tree4.jpg">
                            <IMG SRC="tree4-small.jpg"><BR>
                            tree.spi, <I>depth=4</I></A><BR>
                            <I>(click to enlarge)</I>
                            </P></CENTER></TD>
                </TR>
            </TABLE></P></CENTER>
        </UL>
</UL>

<HR>

<p><small>
Source: techs/MSA/index.htm &nbsp;&nbsp;&nbsp; 
d388 2
a389 1
</small></p>
d391 2
a392 2
</BODY>
</HTML>
@
