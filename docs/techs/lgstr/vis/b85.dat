; b81.DAT
; For making SPIDER volumes from Sterecon DOC files
; --First step: convert the doc files into images
do lb1 i= 1,79 ; EDIT number of DOC files
x11=i
pp ll
DOC{***i}
jnk{***i}
(507,507)      ; EDIT size of traced images: must be
(1,2)          ; the same size you used with Sterecon
(-1)           ; INT, DOC, n, s
(10)
(0)
(4)
(1,1)	     
(0,0)
; --extra step: pad one pixel around each image
pd
jnk{***i}
tmp{***i}
(509,509)
n
(0.0)
(2,2)
lb1
; --second step: 
;  a. mirror the images around the x-axis 
;  b. seed-fill the outside of each image
;  c. reverse and rescale the pixel values
do lb2 j=1,79   ; EDIT number of DOC files
x88=j
mr
tmp{***j}
tem001
x
se
tem001
tem002
(2,2)
(1,10)
ar
tem002
stk{***j}
(p1*(-1)+10)
lb2
; --third step: stack all the images into a volume
sk
stk001
stk{***x88}
srvsvol         ; EDIT name of output volume
fs
srvsvol         ; EDIT name of output volume
; --fourth step: delete the intermediate files
de a
jnk001
de a
tmp001
de a
tem001
de a
stk001
en
